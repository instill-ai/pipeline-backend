syntax = "proto3";

package vdp.pipeline.v1beta;

import "../../../common/healthcheck/v1beta/healthcheck.proto";
import "../../../common/run/v1alpha/run.proto";
// Core definitions
import "../../../core/mgmt/v1beta/mgmt.proto";
// Google API
import "google/api/field_behavior.proto";
import "google/api/resource.proto";
// Protocol Buffers Well-Known Types
import "google/longrunning/operations.proto";
import "google/protobuf/field_mask.proto";
import "google/protobuf/struct.proto";
import "google/protobuf/timestamp.proto";
// OpenAPI definition
import "protoc-gen-openapiv2/options/annotations.proto";
// VDP definitions
import "../../../vdp/pipeline/v1beta/common.proto";
import "../../../vdp/pipeline/v1beta/component_definition.proto";

// LivenessRequest represents a request to check a service liveness status
message LivenessRequest {
  // HealthCheckRequest message
  optional common.healthcheck.v1beta.HealthCheckRequest health_check_request = 1 [(google.api.field_behavior) = OPTIONAL];
}

// LivenessResponse represents a response for a service liveness status
message LivenessResponse {
  // HealthCheckResponse message
  common.healthcheck.v1beta.HealthCheckResponse health_check_response = 1;
}

// ReadinessRequest represents a request to check a service readiness status
message ReadinessRequest {
  // HealthCheckRequest message
  optional common.healthcheck.v1beta.HealthCheckRequest health_check_request = 1 [(google.api.field_behavior) = OPTIONAL];
}

// ReadinessResponse represents a response for a service readiness status
message ReadinessResponse {
  // HealthCheckResponse message
  common.healthcheck.v1beta.HealthCheckResponse health_check_response = 1;
}

// State describes the state of a pipeline.
enum State {
  // Unspecified.
  STATE_UNSPECIFIED = 0;
  // Inactive.
  STATE_INACTIVE = 1;
  // Active.
  STATE_ACTIVE = 2;
  // The pipeline has an error.
  STATE_ERROR = 3;
}

// A Pipeline is an end-to-end workflow that automates a sequence of components
// to process data.
//
// For more information, see [Pipeline](https://www.instill.tech/docs/vdp/introduction) in
// the official documentation.
message Pipeline {
  // View defines how a Pipeline is presented.
  enum View {
    // Unspecified, equivalent to BASIC.
    VIEW_UNSPECIFIED = 0;
    // Default view, only includes basic information.
    VIEW_BASIC = 1;
    // Full representation.
    VIEW_FULL = 2;
    // Contains the recipe of the resource.
    VIEW_RECIPE = 3;
  }

  // Visibility defines who can access the pipeline.
  enum Visibility {
    // Unspecified, equivalent to PRIVATE.
    VISIBILITY_UNSPECIFIED = 0;
    // Only the user can see the pipeline.
    VISIBILITY_PRIVATE = 1;
    // Other users can see the pipeline.
    VISIBILITY_PUBLIC = 2;
  }

  // Statistic data
  message Stats {
    // Number of pipeline runs.
    int32 number_of_runs = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
    // Last run time.
    google.protobuf.Timestamp last_run_time = 2 [(google.api.field_behavior) = OUTPUT_ONLY];
    // Number of times this pipeline has been cloned.
    int32 number_of_clones = 3 [(google.api.field_behavior) = OUTPUT_ONLY];
  }

  // The name of the pipeline, defined by its parent and ID.
  // - Format: `{parent_type}/{parent.id}/pipelines/{pipeline.id}`.
  string name = 1 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Pipeline UUID.
  string uid = 2 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Pipeline resource ID (used in `name` as the last segment). This conforms
  // to RFC-1034, which restricts to letters, numbers, and hyphen, with the
  // first character a letter, the last a letter or a number, and a 63
  // character maximum.
  string id = 3 [(google.api.field_behavior) = IMMUTABLE];
  // Pipeline description.
  optional string description = 4 [(google.api.field_behavior) = OPTIONAL];
  // Recipe describes the components of a Pipeline and how they are connected.
  google.protobuf.Struct recipe = 5 [(google.api.field_behavior) = REQUIRED];
  // Pipeline creation time.
  google.protobuf.Timestamp create_time = 10 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Pipeline update time.
  google.protobuf.Timestamp update_time = 11 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Deleted field.
  reserved 13;
  // Pipeline delete time.
  google.protobuf.Timestamp delete_time = 14 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Pipeline sharing information.
  Sharing sharing = 15 [(google.api.field_behavior) = OPTIONAL];
  // Metadata holds console-related data such as the pipeline builder layout.
  google.protobuf.Struct metadata = 16 [(google.api.field_behavior) = OPTIONAL];
  // Owner Name.
  string owner_name = 17 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Deleted Fields.
  reserved 18;
  // Releases holds the history of pipeline versions.
  repeated PipelineRelease releases = 19 [(google.api.field_behavior) = OUTPUT_ONLY];
  // README holds the pipeline documentation.
  string readme = 20 [(google.api.field_behavior) = OPTIONAL];
  // Permission defines how a pipeline can be used.
  Permission permission = 21 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Pipeline visibility.
  Visibility visibility = 22 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Pipeline owner.
  optional core.mgmt.v1beta.Owner owner = 23 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Data specifications.
  DataSpecification data_specification = 24 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Tags.
  repeated string tags = 25 [(google.api.field_behavior) = OPTIONAL];
  // Statistic data.
  Stats stats = 26 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Recipe in YAML format describes the components of a pipeline and how they
  // are connected.
  string raw_recipe = 27 [(google.api.field_behavior) = OPTIONAL];
  // A link to the source code of the pipeline (e.g. to a GitHub repository).
  optional string source_url = 28 [(google.api.field_behavior) = OPTIONAL];
  // A link to any extra information.
  optional string documentation_url = 29 [(google.api.field_behavior) = OPTIONAL];
  // License under which the pipeline is distributed.
  optional string license = 30 [(google.api.field_behavior) = OPTIONAL];
  // Pipeline profile image in base64 format.
  optional string profile_image = 31 [(google.api.field_behavior) = OPTIONAL];
}

// TriggerMetadata contains the traces of the pipeline inference.
message TriggerMetadata {
  // Each key in the `traces` object is a component ID. The value is a Trace
  // object containing the execution details.
  map<string, Trace> traces = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// Trace contains the execution details of a component.
message Trace {
  // Status holds the the component execution outcome.
  enum Status {
    // Unspecified.
    STATUS_UNSPECIFIED = 0;
    // Successfully completed.
    STATUS_COMPLETED = 1;
    // Skipped.
    STATUS_SKIPPED = 2;
    // Aborted with error.
    STATUS_ERROR = 3;
  }
  // Statuses contains an execution status per input.
  repeated Status statuses = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Component inputs.
  repeated google.protobuf.Struct inputs = 2 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Component outputs.
  repeated google.protobuf.Struct outputs = 3 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Error details.
  google.protobuf.Struct error = 4 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Computation time in seconds.
  float compute_time_in_seconds = 5 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// GetHubStatsRequest represents a request to get hub stats.
message GetHubStatsRequest {}

// GetHubStatsResponse represents a response to get hub stats.
message GetHubStatsResponse {
  // Total number of public pipelines.
  int32 number_of_public_pipelines = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Total number of featured pipelines.
  int32 number_of_featured_pipelines = 2 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// Pipeline releases contain the version control information of a pipeline.
// This allows users to track changes in the pipeline over time.
message PipelineRelease {
  // The name of the release, defined by its parent and ID.
  // - Format: `{parent_type}/{parent.id}/pipelines/{pipeline.id}/releases/{release.id}`.
  string name = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Release UUID.
  string uid = 2 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Release resource ID (used in `name` as the last segment). It must be a
  // sematic version vX.Y.Z.
  string id = 3 [(google.api.field_behavior) = IMMUTABLE];
  // Release description.
  optional string description = 4 [(google.api.field_behavior) = OPTIONAL];
  // Recipe of the versioned pipeline.
  google.protobuf.Struct recipe = 5 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Pipeline creation time.
  google.protobuf.Timestamp create_time = 6 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Pipeline update time.
  google.protobuf.Timestamp update_time = 7 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Deleted field.
  reserved 9;
  // Pipeline deletion time.
  google.protobuf.Timestamp delete_time = 10 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Alias.
  string alias = 11 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Key-value object with console-related data such as the pipeline builder
  // layout.
  google.protobuf.Struct metadata = 12;
  // README.
  string readme = 13 [(google.api.field_behavior) = OPTIONAL];
  // Data specifications.
  DataSpecification data_specification = 14 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Recipe in YAML format describes the components of a pipeline and how they
  // are connected.
  string raw_recipe = 15 [(google.api.field_behavior) = OPTIONAL];
}

// ListPipelinesRequest represents a request to list pipelines.
message ListPipelinesRequest {
  // The maximum number of pipelines to return. If this parameter is
  // unspecified, at most 10 pipelines will be returned. The cap value for this
  // parameter is 100 (i.e. any value above that will be coerced to 100).
  optional int32 page_size = 1 [(google.api.field_behavior) = OPTIONAL];
  // Page token.
  optional string page_token = 2 [(google.api.field_behavior) = OPTIONAL];
  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 3 [(google.api.field_behavior) = OPTIONAL];
  // Filter can hold an [AIP-160](https://google.aip.dev/160)-compliant filter
  // expression.
  // - Example: `create_time>timestamp("2000-06-19T23:31:08.657Z")`.
  // - Example:
  // `recipe.components.definition_name:"operator-definitions/2ac8be70-0f7a-4b61-a33d-098b8acfa6f3"`.
  optional string filter = 4 [(google.api.field_behavior) = OPTIONAL];
  // Include soft-deleted pipelines in the result.
  optional bool show_deleted = 5 [(google.api.field_behavior) = OPTIONAL];
  // Limit results to pipelines with the specified visibility.
  optional Pipeline.Visibility visibility = 6 [(google.api.field_behavior) = OPTIONAL];
  // Order by field, with options for ordering by `id`, `create_time` or `update_time`.
  // Format: `order_by=id` or `order_by=create_time desc`, default is `asc`.
  optional string order_by = 7 [(google.api.field_behavior) = OPTIONAL];
}

// ListPipelinesResponse contains a list of pipelines.
message ListPipelinesResponse {
  // A list of pipeline resources.
  repeated Pipeline pipelines = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Next page token.
  string next_page_token = 2 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Total number of pipelines.
  int32 total_size = 3 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// ListNamespacePipelinesRequest represents a request to list pipelines.
message ListNamespacePipelinesRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];
  // The maximum number of pipelines to return. If this parameter is
  // unspecified, at most 10 pipelines will be returned. The cap value for this
  // parameter is 100 (i.e. any value above that will be coerced to 100).
  optional int32 page_size = 2 [(google.api.field_behavior) = OPTIONAL];
  // Page token.
  optional string page_token = 3 [(google.api.field_behavior) = OPTIONAL];
  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 4 [(google.api.field_behavior) = OPTIONAL];
  // Filter can hold an [AIP-160](https://google.aip.dev/160)-compliant filter
  // expression.
  // - Example: `create_time>timestamp("2000-06-19T23:31:08.657Z")`.
  // - Example:
  // `recipe.components.definition_name:"operator-definitions/2ac8be70-0f7a-4b61-a33d-098b8acfa6f3"`.
  optional string filter = 5 [(google.api.field_behavior) = OPTIONAL];
  // Include soft-deleted pipelines in the result.
  optional bool show_deleted = 6 [(google.api.field_behavior) = OPTIONAL];
  // Limit results to pipelines with the specified visibility.
  optional Pipeline.Visibility visibility = 7 [(google.api.field_behavior) = OPTIONAL];
  // Order by field, with options for ordering by `id`, `create_time` or `update_time`.
  // Format: `order_by=id` or `order_by=create_time desc`, default is `asc`.
  optional string order_by = 8 [(google.api.field_behavior) = OPTIONAL];
}

// ListNamespacePipelinesResponse contains a list of pipelines.
message ListNamespacePipelinesResponse {
  // A list of pipeline resources.
  repeated Pipeline pipelines = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Next page token.
  string next_page_token = 2 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Total number of pipelines.
  int32 total_size = 3 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// LookUpPipelineRequest represents a request to query a pipeline by its UID.
message LookUpPipelineRequest {
  // The permalink of the pipeline, which allows its access by UID.
  // - Format: `pipelines/{pipeline.uid}`.
  string permalink = 1 [(google.api.field_behavior) = REQUIRED];
  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 2 [(google.api.field_behavior) = OPTIONAL];
}

// LookUpPipelineResponse contains the requested pipeline.
message LookUpPipelineResponse {
  // The requested pipeline.
  Pipeline pipeline = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// CreateNamespacePipelineRequest represents a request from a namespace to create a
// pipeline.
message CreateNamespacePipelineRequest {
  // The namespace that creates the pipeline.
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];
  // The properties of the pipeline to be created.
  Pipeline pipeline = 2;
}

// CreateNamespacePipelineResponse contains the created pipeline.
message CreateNamespacePipelineResponse {
  // The created pipeline resource.
  Pipeline pipeline = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// GetNamespacePipelineRequest represents a request to fetch the details of a
// pipeline owned by a namespace.
message GetNamespacePipelineRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];
  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 3 [(google.api.field_behavior) = OPTIONAL];
}

// GetNamespacePipelineResponse contains the requested pipeline.
message GetNamespacePipelineResponse {
  // The pipeline resource.
  Pipeline pipeline = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// UpdateNamespacePipelineRequest represents a request to update a pipeline owned by
// a namespace.
message UpdateNamespacePipelineRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];
  // The pipeline fields that will replace the existing ones.
  Pipeline pipeline = 3;
  // The update mask specifies the subset of fields that should be modified.
  //
  // For more information about this field, see
  // https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#field-mask.
  google.protobuf.FieldMask update_mask = 4 [(google.api.field_behavior) = REQUIRED];
}

// UpdateNamespacePipelineResponse contains the updated pipeline.
message UpdateNamespacePipelineResponse {
  // The updated pipeline resource.
  Pipeline pipeline = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// DeleteNamespacePipelineRequest represents a request to delete a pipeline owned by
// a namespace.
message DeleteNamespacePipelineRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];
}

// DeleteNamespacePipelineResponse is an empty response.
message DeleteNamespacePipelineResponse {}

// ValidateNamespacePipelineRequest represents a request to validate a pipeline
// owned by a user.
message ValidateNamespacePipelineRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];
}

// ValidateNamespacePipelineResponse contains a validated pipeline.
message ValidateNamespacePipelineResponse {
  // Success
  bool success = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
  // The validated pipeline resource.
  repeated PipelineValidationError errors = 2 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// RenameNamespacePipelineRequest represents a request to rename the name of a
// pipeline owned by a namespace.
message RenameNamespacePipelineRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];
  // The new resource ID. This will transform the resource name into
  // `namespaces/{namespace.id}/pipelines/{new_pipeline_id}`.
  string new_pipeline_id = 3 [(google.api.field_behavior) = REQUIRED];
}

// RenameNamespacePipelineResponse contains a renamed pipeline.
message RenameNamespacePipelineResponse {
  // The renamed pipeline resource.
  Pipeline pipeline = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// CloneNamespacePipelineRequest represents a request to clone a pipeline owned by a
// user.
message CloneNamespacePipelineRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];
  // The target pipeline. It can be under a user or an organization
  // namespace, so the following formats are accepted:
  // - `{user.id}/{pipeline.id}`
  // - `{organization.id}/{pipeline.id}`
  string target = 3 [(google.api.field_behavior) = REQUIRED];
  // Pipeline description.
  string description = 4 [(google.api.field_behavior) = OPTIONAL];
  // Pipeline sharing information.
  Sharing sharing = 5 [(google.api.field_behavior) = OPTIONAL];
}

// CloneNamespacePipelineResponse contains a cloned pipeline.
message CloneNamespacePipelineResponse {}

// CloneNamespacePipelineReleaseRequest represents a request to clone a pipeline
// release owned by a user.
message CloneNamespacePipelineReleaseRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];

  // Release ID
  string release_id = 3 [(google.api.field_behavior) = REQUIRED];

  // The target pipeline. It can be under a user or an organization
  // namespace, so the following formats are accepted:
  // - `{user.id}/{pipeline.id}`
  // - `{organization.id}/{pipeline.id}`
  string target = 4 [(google.api.field_behavior) = REQUIRED];
  // Pipeline description.
  string description = 5 [(google.api.field_behavior) = OPTIONAL];
  // Pipeline sharing information.
  Sharing sharing = 6 [(google.api.field_behavior) = OPTIONAL];
}

// CloneNamespacePipelineReleaseResponse contains a cloned pipeline.
message CloneNamespacePipelineReleaseResponse {}

//SendNamespacePipelineEventRequest
message SendNamespacePipelineEventRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];
  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];
  // Event
  string event = 3;
  // Code
  string code = 4;
  // Input data
  google.protobuf.Struct data = 5;
}

//SendNamespacePipelineEventResponse
message SendNamespacePipelineEventResponse {
  // data
  google.protobuf.Struct data = 1;
}

//SendNamespacePipelineReleaseEventRequest
message SendNamespacePipelineReleaseEventRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];
  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];
  // Pipeline ID
  string release_id = 3 [(google.api.field_behavior) = REQUIRED];
  // Event
  string event = 4;
  // Code
  string code = 5;
  // Input data
  google.protobuf.Struct data = 6;
}

//SendNamespacePipelineReleaseEventResponse
message SendNamespacePipelineReleaseEventResponse {
  // data
  google.protobuf.Struct data = 1;
}

// TriggerNamespacePipelineRequest represents a request to trigger a user-owned
// pipeline synchronously.
message TriggerNamespacePipelineRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];
  // Pipeline input parameters, it will be deprecated soon.
  repeated google.protobuf.Struct inputs = 3 [(google.api.field_behavior) = REQUIRED];
  // Data
  repeated TriggerData data = 4 [(google.api.field_behavior) = REQUIRED];
}

// TriggerNamespacePipelineResponse contains the pipeline execution results, i.e.,
// the multiple model inference outputs.
message TriggerNamespacePipelineResponse {
  // Model inference outputs.
  repeated google.protobuf.Struct outputs = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Traces of the pipeline inference.
  TriggerMetadata metadata = 2 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// TriggerNamespacePipelineWithStreamRequest represents a request to trigger a user-owned
// pipeline synchronously and streams back the results.
message TriggerNamespacePipelineWithStreamRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];
  // Pipeline input parameters, it will be deprecated soon.
  repeated google.protobuf.Struct inputs = 3 [(google.api.field_behavior) = OPTIONAL];
  // Data
  repeated TriggerData data = 4 [(google.api.field_behavior) = OPTIONAL];
}

// TriggerNamespacePipelineWithStreamResponse contains the pipeline execution results, i.e.,
// the multiple model inference outputs.
message TriggerNamespacePipelineWithStreamResponse {
  // Model inference outputs.
  repeated google.protobuf.Struct outputs = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Traces of the pipeline inference.
  TriggerMetadata metadata = 2 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// TriggerNamespacePipelineRequest represents a request to trigger a user-owned
// pipeline synchronously.
message TriggerAsyncNamespacePipelineRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];

  // Pipeline input parameters, it will be deprecated soon.
  repeated google.protobuf.Struct inputs = 3 [(google.api.field_behavior) = OPTIONAL];
  // Data
  repeated TriggerData data = 4 [(google.api.field_behavior) = OPTIONAL];
}

// TriggerAsyncNamespacePipelineResponse contains the information to access the
// status of an asynchronous pipeline execution.
message TriggerAsyncNamespacePipelineResponse {
  // Long-running operation information.
  google.longrunning.Operation operation = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// CreateNamespacePipelineReleaseRequest represents a request to release a version
// in a user-owned pipeline.
message CreateNamespacePipelineReleaseRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];

  // The release information.
  PipelineRelease release = 3;
}

// CreateNamespacePipelineReleaseResponse contains the created release.
message CreateNamespacePipelineReleaseResponse {
  // The created pipeline release object.
  PipelineRelease release = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// ListNamespacePipelineReleasesRequest represents a request to list the releases in
// a user-owned pipeline.
message ListNamespacePipelineReleasesRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];

  // The maximum number of releases to return. If this parameter is
  // unspecified, at most 10 pipelines will be returned. The cap value for this
  // parameter is 100 (i.e. any value above that will be coerced to 100).
  optional int32 page_size = 3 [(google.api.field_behavior) = OPTIONAL];
  // Page token.
  optional string page_token = 4 [(google.api.field_behavior) = OPTIONAL];
  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 5 [(google.api.field_behavior) = OPTIONAL];
  // Filter can hold an [AIP-160](https://google.aip.dev/160)-compliant filter
  // expression.
  // - Example: `create_time>timestamp("2000-06-19T23:31:08.657Z")`.
  optional string filter = 6 [(google.api.field_behavior) = OPTIONAL];
  // Include soft-deleted pipelines in the result.
  optional bool show_deleted = 7 [(google.api.field_behavior) = OPTIONAL];
}

// ListNamespacePipelineReleasesResponse contains a list of pipeline releases.
message ListNamespacePipelineReleasesResponse {
  // A list of pipeline release resources.
  repeated PipelineRelease releases = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Next page token.
  string next_page_token = 2 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Total number of pipeline releases.
  int32 total_size = 3 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// GetNamespacePipelineReleaseRequest represents a request to fetchthe details of a
// release in a user-owned pipeline.
message GetNamespacePipelineReleaseRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];

  // Release ID
  string release_id = 3 [(google.api.field_behavior) = REQUIRED];

  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 4 [(google.api.field_behavior) = OPTIONAL];
}

// GetNamespacePipelineReleaseResponse contains the requested pipeline release.
message GetNamespacePipelineReleaseResponse {
  // The pipeline release resource.
  PipelineRelease release = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// UpdateNamespacePipelineReleaseRequest represents a request to update a user-owned
// pipeline release.
message UpdateNamespacePipelineReleaseRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];

  // Release ID
  string release_id = 3 [(google.api.field_behavior) = REQUIRED];
  // The pipeline release fields that will replace the existing ones.
  // A pipeline release resource to update
  PipelineRelease release = 4;
  // The update mask specifies the subset of fields that should be modified.
  //
  // For more information about this field, see
  // https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#field-mask.
  google.protobuf.FieldMask update_mask = 5 [(google.api.field_behavior) = REQUIRED];
}

// UpdateNamespacePipelineReleaseResponse contains the updated pipeline release.
message UpdateNamespacePipelineReleaseResponse {
  // The updated pipeline release resource.
  PipelineRelease release = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// DeleteNamespacePipelineReleaseRequest represents a request to delete a release in
// a user-owned pipeline.
message DeleteNamespacePipelineReleaseRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];

  // Release ID
  string release_id = 3 [(google.api.field_behavior) = REQUIRED];
}

// DeleteNamespacePipelineReleaseResponse is an empty response.
message DeleteNamespacePipelineReleaseResponse {}

// TriggerNamespacePipelineReleaseRequest represents a request to trigger a pinned
// release of a user-owned pipeline.
message TriggerNamespacePipelineReleaseRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];

  // Release ID
  string release_id = 3 [(google.api.field_behavior) = REQUIRED];

  // Pipeline input parameters, it will be deprecated soon.
  repeated google.protobuf.Struct inputs = 4 [(google.api.field_behavior) = OPTIONAL];
  // Data
  repeated TriggerData data = 5 [(google.api.field_behavior) = OPTIONAL];
}

// TriggerNamespacePipelineReleaseResponse contains the pipeline execution results,
// i.e., the multiple model inference outputs.
message TriggerNamespacePipelineReleaseResponse {
  // Model inference outputs.
  repeated google.protobuf.Struct outputs = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Traces of the pipeline inference.
  TriggerMetadata metadata = 2 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// TriggerNamespacePipelineReleaseRequest represents a request to trigger a pinned
// release of a user-owned pipeline asynchronously.
message TriggerAsyncNamespacePipelineReleaseRequest {
  // Namespace ID
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Pipeline ID
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];

  // Release ID
  string release_id = 3 [(google.api.field_behavior) = REQUIRED];

  // Pipeline input parameters, it will be deprecated soon.
  repeated google.protobuf.Struct inputs = 4 [(google.api.field_behavior) = OPTIONAL];

  // Data
  repeated TriggerData data = 5 [(google.api.field_behavior) = OPTIONAL];
}

// TriggerAsyncNamespacePipelineReleaseResponse contains the information to access
// the status of an asynchronous pipeline execution.
message TriggerAsyncNamespacePipelineReleaseResponse {
  // Long-running operation information.
  google.longrunning.Operation operation = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// CreateUserPipelineRequest represents a request from a user to create a
// pipeline.
message CreateUserPipelineRequest {
  // The properties of the pipeline to be created.
  Pipeline pipeline = 1;
  // The parent resource, i.e., the user that creates the pipeline.
  // - Format: `users/{user.id}`.
  string parent = 2 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {child_type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_name"}
    }
  ];
}

// CreateUserPipelineResponse contains the created pipeline.
message CreateUserPipelineResponse {
  // The created pipeline resource.
  Pipeline pipeline = 1;
}

// ListUserPipelinesRequest represents a request to list the pipelines of a
// user.
message ListUserPipelinesRequest {
  // The maximum number of pipelines to return. If this parameter is
  // unspecified, at most 10 pipelines will be returned. The cap value for this
  // parameter is 100 (i.e. any value above that will be coerced to 100).
  optional int32 page_size = 1 [(google.api.field_behavior) = OPTIONAL];
  // Page token.
  optional string page_token = 2 [(google.api.field_behavior) = OPTIONAL];
  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 3 [(google.api.field_behavior) = OPTIONAL];
  // Filter can hold an [AIP-160](https://google.aip.dev/160)-compliant filter
  // expression.
  // - Example: `create_time>timestamp("2000-06-19T23:31:08.657Z")`.
  // - Example:
  // `recipe.components.definition_name:"operator-definitions/2ac8be70-0f7a-4b61-a33d-098b8acfa6f3"`.
  optional string filter = 4 [(google.api.field_behavior) = OPTIONAL];
  // The parent resource, i.e., the user that created the pipelines.
  // - Format: `users/{user.id}`.
  string parent = 5 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {child_type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_name"}
    }
  ];
  // Include soft-deleted pipelines in the result.
  optional bool show_deleted = 6 [(google.api.field_behavior) = OPTIONAL];
  // Limit results to pipelines with the specified visibility.
  optional Pipeline.Visibility visibility = 7 [(google.api.field_behavior) = OPTIONAL];
  // Order by field, with options for ordering by `id`, `create_time` or `update_time`.
  // Format: `order_by=id` or `order_by=create_time desc`, default is `asc`.
  optional string order_by = 8 [(google.api.field_behavior) = OPTIONAL];
}

// ListUserPipelinesResponse contains a list of pipelines.
message ListUserPipelinesResponse {
  // A list of pipeline resources.
  repeated Pipeline pipelines = 1;
  // Next page token.
  string next_page_token = 2;
  // Total number of pipelines.
  int32 total_size = 3;
}

// GetUserPipelineRequest represents a request to fetch the details of a
// pipeline owned by a user.
message GetUserPipelineRequest {
  // The resource name of the pipeline, which allows its access by parent user
  // and ID.
  // - Format: `users/{user.id}/pipelines/{pipeline.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_pipeline_name"}
    }
  ];
  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 2 [(google.api.field_behavior) = OPTIONAL];
}

// GetUserPipelineResponse contains the requested pipeline.
message GetUserPipelineResponse {
  // The pipeline resource.
  Pipeline pipeline = 1;
}

// UpdateUserPipelineRequest represents a request to update a pipeline owned by
// a user.
message UpdateUserPipelineRequest {
  // The pipeline fields that will replace the existing ones.
  Pipeline pipeline = 1 [(google.api.field_behavior) = REQUIRED];
  // The update mask specifies the subset of fields that should be modified.
  //
  // For more information about this field, see
  // https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#field-mask.
  google.protobuf.FieldMask update_mask = 2 [(google.api.field_behavior) = REQUIRED];
}

// UpdateUserPipelineResponse contains the updated pipeline.
message UpdateUserPipelineResponse {
  // The updated pipeline resource.
  Pipeline pipeline = 1;
}

// DeleteUserPipelineRequest represents a request to delete a pipeline owned by
// a user.
message DeleteUserPipelineRequest {
  // The resource name of the pipeline, which allows its access by parent user
  // and ID.
  // - Format: `users/{user.id}/pipelines/{pipeline.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_pipeline_name"}
    }
  ];
}

// DeleteUserPipelineResponse is an empty response.
message DeleteUserPipelineResponse {}

// PipelineValidation
message PipelineValidationError {
  // Location
  string location = 1;
  // error
  string error = 2;
}

// ValidateUserPipelineRequest represents a request to validate a pipeline
// owned by a user.
message ValidateUserPipelineRequest {
  // The resource name of the pipeline, which allows its access by parent user
  // and ID.
  // - Format: `users/{user.id}/pipelines/{pipeline.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_pipeline_name"}
    }
  ];
}

// ValidateUserPipelineResponse contains a validated pipeline.
message ValidateUserPipelineResponse {
  // Success
  bool success = 1;
  // The validated pipeline resource.
  repeated PipelineValidationError errors = 2;
}

// RenameUserPipelineRequest represents a request to rename the name of a
// pipeline owned by a user.
message RenameUserPipelineRequest {
  // The resource name of the pipeline, which allows its access by parent user
  // and ID.
  // - Format: `users/{user.id}/pipelines/{pipeline.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_pipeline_name"}
    }
  ];
  // The new resource ID. This will transform the resource name into
  // `users/{user.id}/pipelines/{new_pipeline_id}`.
  string new_pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];
}

// RenameUserPipelineResponse contains a renamed pipeline.
message RenameUserPipelineResponse {
  // The renamed pipeline resource.
  Pipeline pipeline = 1;
}

// CloneUserPipelineRequest represents a request to clone a pipeline owned by a
// user.
message CloneUserPipelineRequest {
  // The resource name of the pipeline, which allows its access by parent user
  // and ID.
  // - Format: `users/{user.id}/pipelines/{pipeline.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_pipeline_name"}
    }
  ];
  // The target pipeline. It can be under a user or an organization
  // namespace, so the following formats are accepted:
  // - `{user.id}/{pipeline.id}`
  // - `{organization.id}/{pipeline.id}`
  string target = 2 [(google.api.field_behavior) = REQUIRED];
  // Pipeline description.
  string description = 3 [(google.api.field_behavior) = OPTIONAL];
  // Pipeline sharing information.
  Sharing sharing = 4 [(google.api.field_behavior) = OPTIONAL];
}

// CloneUserPipelineResponse contains a cloned pipeline.
message CloneUserPipelineResponse {}

// CloneUserPipelineReleaseRequest represents a request to clone a pipeline
// release owned by a user.
message CloneUserPipelineReleaseRequest {
  // The resource name of the pipeline release.
  // - Format: `users/{user.id}/pipelines/{pipeline.id}/releases/{version}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_pipeline_release_name"}
    }
  ];
  // The target pipeline. It can be under a user or an organization
  // namespace, so the following formats are accepted:
  // - `{user.id}/{pipeline.id}`
  // - `{organization.id}/{pipeline.id}`
  string target = 2 [(google.api.field_behavior) = REQUIRED];
  // Pipeline description.
  string description = 3 [(google.api.field_behavior) = OPTIONAL];
  // Pipeline sharing information.
  Sharing sharing = 4 [(google.api.field_behavior) = OPTIONAL];
}

// CloneUserPipelineReleaseResponse contains a cloned pipeline.
message CloneUserPipelineReleaseResponse {}

// TriggerUserPipelineRequest represents a request to trigger a user-owned
// pipeline synchronously.
message TriggerUserPipelineRequest {
  // The resource name of the pipeline, which allows its access by parent user
  // and ID.
  // - Format: `users/{user.id}/pipelines/{pipeline.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_pipeline_name"}
    }
  ];
  // Pipeline input parameters, it will be deprecated soon.
  repeated google.protobuf.Struct inputs = 2;
  // Data
  repeated TriggerData data = 3;
}

// TriggerUserPipelineResponse contains the pipeline execution results, i.e.,
// the multiple model inference outputs.
message TriggerUserPipelineResponse {
  // Model inference outputs.
  repeated google.protobuf.Struct outputs = 1;
  // Traces of the pipeline inference.
  TriggerMetadata metadata = 2;
}

// TriggerUserPipelineWithStreamRequest represents a request to trigger a user-owned
// pipeline synchronously and streams back the results.
message TriggerUserPipelineWithStreamRequest {
  // The resource name of the pipeline, which allows its access by parent user
  // and ID.
  // - Format: `users/{user.id}/pipelines/{pipeline.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_pipeline_name"}
    }
  ];
  // Pipeline input parameters, it will be deprecated soon.
  repeated google.protobuf.Struct inputs = 2;
  // Data
  repeated TriggerData data = 3;
}

// TriggerUserPipelineWithStreamResponse contains the pipeline execution results, i.e.,
// the multiple model inference outputs.
message TriggerUserPipelineWithStreamResponse {
  // Model inference outputs.
  repeated google.protobuf.Struct outputs = 1;
  // Traces of the pipeline inference.
  TriggerMetadata metadata = 2;
}

// Data
message TriggerData {
  // Variables
  google.protobuf.Struct variable = 1 [(google.api.field_behavior) = OPTIONAL];
  // Variables
  map<string, string> secret = 2 [(google.api.field_behavior) = OPTIONAL];
}

// TriggerUserPipelineRequest represents a request to trigger a user-owned
// pipeline synchronously.
message TriggerAsyncUserPipelineRequest {
  // The resource name of the pipeline, which allows its access by parent user
  // and ID.
  // - Format: `users/{user.id}/pipelines/{pipeline.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_pipeline_name"}
    }
  ];

  // Pipeline input parameters, it will be deprecated soon.
  repeated google.protobuf.Struct inputs = 2;
  // Data
  repeated TriggerData data = 3;
}

// TriggerAsyncUserPipelineResponse contains the information to access the
// status of an asynchronous pipeline execution.
message TriggerAsyncUserPipelineResponse {
  // Long-running operation information.
  google.longrunning.Operation operation = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// CreateUserPipelineReleaseRequest represents a request to release a version
// in a user-owned pipeline.
message CreateUserPipelineReleaseRequest {
  // The release information.
  PipelineRelease release = 1;
  // Name of the pipeline for which the release will be created.
  // Format: `users/{user.id}/pipelines/{pipeline.id}`
  string parent = 2 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {child_type: "api.instill.tech/PipelineRelease"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_name"}
    }
  ];
}

// CreateUserPipelineReleaseResponse contains the created release.
message CreateUserPipelineReleaseResponse {
  // The created pipeline release object.
  PipelineRelease release = 1;
}

// ListUserPipelineReleasesRequest represents a request to list the releases in
// a user-owned pipeline.
message ListUserPipelineReleasesRequest {
  // The maximum number of releases to return. If this parameter is
  // unspecified, at most 10 pipelines will be returned. The cap value for this
  // parameter is 100 (i.e. any value above that will be coerced to 100).
  optional int32 page_size = 1 [(google.api.field_behavior) = OPTIONAL];
  // Page token.
  optional string page_token = 2 [(google.api.field_behavior) = OPTIONAL];
  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 3 [(google.api.field_behavior) = OPTIONAL];
  // Filter can hold an [AIP-160](https://google.aip.dev/160)-compliant filter
  // expression.
  // - Example: `create_time>timestamp("2000-06-19T23:31:08.657Z")`.
  optional string filter = 4 [(google.api.field_behavior) = OPTIONAL];
  // The parent resource where this pipeline release will be created.
  // Format: `users/{user.id}/pipelines/{pipeline.id}`.
  string parent = 5 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {child_type: "api.instill.tech/PipelineRelease"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_name"}
    }
  ];
  // Include soft-deleted pipelines in the result.
  optional bool show_deleted = 6 [(google.api.field_behavior) = OPTIONAL];
}

// ListUserPipelineReleasesResponse contains a list of pipeline releases.
message ListUserPipelineReleasesResponse {
  // A list of pipeline release resources.
  repeated PipelineRelease releases = 1;
  // Next page token.
  string next_page_token = 2;
  // Total number of pipeline releases.
  int32 total_size = 3;
}

// GetUserPipelineReleaseRequest represents a request to fetchthe details of a
// release in a user-owned pipeline.
message GetUserPipelineReleaseRequest {
  // The resource name of the pipeline release, which allows its access by
  // parent pipeline and ID.
  // - Format: `users/{user.id}/pipelines/{pipeline.id}/releases/{release.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/PipelineRelease"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_pipeline_release_name"}
    }
  ];
  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 2 [(google.api.field_behavior) = OPTIONAL];
}

// GetUserPipelineReleaseResponse contains the requested pipeline release.
message GetUserPipelineReleaseResponse {
  // The pipeline release resource.
  PipelineRelease release = 1;
}

// UpdateUserPipelineReleaseRequest represents a request to update a user-owned
// pipeline release.
message UpdateUserPipelineReleaseRequest {
  // The pipeline release fields that will replace the existing ones.
  // A pipeline release resource to update
  PipelineRelease release = 1 [(google.api.field_behavior) = REQUIRED];
  // The update mask specifies the subset of fields that should be modified.
  //
  // For more information about this field, see
  // https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#field-mask.
  google.protobuf.FieldMask update_mask = 2 [(google.api.field_behavior) = REQUIRED];
}

// UpdateUserPipelineReleaseResponse contains the updated pipeline release.
message UpdateUserPipelineReleaseResponse {
  // The updated pipeline release resource.
  PipelineRelease release = 1;
}

// DeleteUserPipelineReleaseRequest represents a request to delete a release in
// a user-owned pipeline.
message DeleteUserPipelineReleaseRequest {
  // The resource name of the pipeline release, which allows its access by
  // parent pipeline and ID.
  // - Format: `users/{user.id}/pipelines/{pipeline.id}/releases/{release.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/PipelineRelease"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_pipeline_release_name"}
    }
  ];
}

// DeleteUserPipelineReleaseResponse is an empty response.
message DeleteUserPipelineReleaseResponse {}

// RestoreUserPipelineReleaseRequest represents a request to set the version of
// a user-owned pipeline to a pinned release.
message RestoreUserPipelineReleaseRequest {
  // The resource name of the pipeline release, which allows its access by
  // parent pipeline and ID.
  // - Format: `users/{user.id}/pipelines/{pipeline.id}/releases/{release.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/PipelineRelease"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_pipeline_release_name"}
    }
  ];
}

// RestoreUserPipelineReleaseResponse contains the requested pipeline release.
message RestoreUserPipelineReleaseResponse {
  // The pipeline release resource.
  PipelineRelease release = 1;
}

// RenameUserPipelineReleaseRequest represents a request to rename a release in
// a user-owned pipeline.
message RenameUserPipelineReleaseRequest {
  // The resource name of the pipeline release, which allows its access by
  // parent pipeline and ID.
  // - Format: `users/{user.id}/pipelines/{pipeline.id}/releases/{release.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/PipelineRelease"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_pipeline_release_name"}
    }
  ];
  // The new resource ID. This will transform the resource name into
  // `users/{user.id}/pipelines/{pipeline.id}/releases{new_release_id}`.
  string new_pipeline_release_id = 2 [(google.api.field_behavior) = REQUIRED];
}

// RenameUserPipelineReleaseResponse contains a renamed pipeline release.
message RenameUserPipelineReleaseResponse {
  // The renamed pipeline release.
  PipelineRelease release = 1;
}

// TriggerUserPipelineReleaseRequest represents a request to trigger a pinned
// release of a user-owned pipeline.
message TriggerUserPipelineReleaseRequest {
  // The resource name of the pipeline release, which allows its access by
  // parent pipeline and ID.
  // - Format: `users/{user.id}/pipelines/{pipeline.id}/releases/{release.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/PipelineRelease"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_pipeline_release_name"}
    }
  ];

  // Pipeline input parameters, it will be deprecated soon.
  repeated google.protobuf.Struct inputs = 2;
  // Data
  repeated TriggerData data = 3;
}

// TriggerUserPipelineReleaseResponse contains the pipeline execution results,
// i.e., the multiple model inference outputs.
message TriggerUserPipelineReleaseResponse {
  // Model inference outputs.
  repeated google.protobuf.Struct outputs = 1;
  // Traces of the pipeline inference.
  TriggerMetadata metadata = 2;
}

// TriggerUserPipelineReleaseRequest represents a request to trigger a pinned
// release of a user-owned pipeline asynchronously.
message TriggerAsyncUserPipelineReleaseRequest {
  // The resource name of the pipeline release, which allows its access by
  // parent pipeline and ID.
  // - Format: `users/{user.id}/pipelines/{pipeline.id}/releases/{release.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/PipelineRelease"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "user_pipeline_release_name"}
    }
  ];
  // Pipeline input parameters, it will be deprecated soon.
  repeated google.protobuf.Struct inputs = 2;
  // Data
  repeated TriggerData data = 3;
}

// TriggerAsyncUserPipelineReleaseResponse contains the information to access
// the status of an asynchronous pipeline execution.
message TriggerAsyncUserPipelineReleaseResponse {
  // Long-running operation information.
  google.longrunning.Operation operation = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// CreateOrganizationPipelineRequest represents a request from an organization
// to create a pipeline.
message CreateOrganizationPipelineRequest {
  // The properties of the pipeline to be created.
  Pipeline pipeline = 1;
  // The parent resource, i.e., the organization that creates the pipeline.
  // - Format: `organizations/{organization.id}`.
  string parent = 2 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {child_type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_name"}
    }
  ];
}

// CreateOrganizationPipelineResponse contains the created pipeline.
message CreateOrganizationPipelineResponse {
  // The created pipeline resource.
  Pipeline pipeline = 1;
}

// ListOrganizationPipelinesRequest represents a request to list the pipelines
// of an organization.
message ListOrganizationPipelinesRequest {
  // The maximum number of pipelines to return. If this parameter is
  // unspecified, at most 10 pipelines will be returned. The cap value for this
  // parameter is 100 (i.e. any value above that will be coerced to 100).
  optional int32 page_size = 1 [(google.api.field_behavior) = OPTIONAL];
  // Page token.
  optional string page_token = 2 [(google.api.field_behavior) = OPTIONAL];
  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 3 [(google.api.field_behavior) = OPTIONAL];
  // Filter can hold an [AIP-160](https://google.aip.dev/160)-compliant filter
  // expression.
  // - Example: `create_time>timestamp("2000-06-19T23:31:08.657Z")`.
  // - Example:
  // `recipe.components.definition_name:"operator-definitions/2ac8be70-0f7a-4b61-a33d-098b8acfa6f3"`.
  optional string filter = 4 [(google.api.field_behavior) = OPTIONAL];
  // The parent resource, i.e., the organization that created the pipelines.
  // - Format: `organizations/{organization.id}`.
  string parent = 5 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {child_type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_name"}
    }
  ];
  // Include soft-deleted pipelines in the result.
  optional bool show_deleted = 6 [(google.api.field_behavior) = OPTIONAL];
  // Limit results to pipelines with the specified visibility.
  optional Pipeline.Visibility visibility = 7 [(google.api.field_behavior) = OPTIONAL];
  // Order by field, with options for ordering by `id`, `create_time` or `update_time`.
  // Format: `order_by=id` or `order_by=create_time desc`, default is `asc`.
  optional string order_by = 8 [(google.api.field_behavior) = OPTIONAL];
}

// ListOrganizationPipelinesResponse contains a list of pipelines.
message ListOrganizationPipelinesResponse {
  // A list of pipeline resources.
  repeated Pipeline pipelines = 1;
  // Next page token.
  string next_page_token = 2;
  // Total number of pipelines.
  int32 total_size = 3;
}

// GetOrganizationPipelineRequest represents a request to fetch the details of
// a pipeline owned by an organization.
message GetOrganizationPipelineRequest {
  // The resource name of the pipeline, which allows its access by parent
  // organization and ID.
  // - Format: `organizations/{organization.id}/pipelines/{pipeline.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_pipeline_name"}
    }
  ];
  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 2 [(google.api.field_behavior) = OPTIONAL];
}

// GetOrganizationPipelineResponse contains the requested pipeline.
message GetOrganizationPipelineResponse {
  // The pipeline resource.
  Pipeline pipeline = 1;
}

// UpdateOrganizationPipelineRequest represents a request to update a pipeline
// owned by an organization.
message UpdateOrganizationPipelineRequest {
  // The pipeline fields that will replace the existing ones.
  Pipeline pipeline = 1 [(google.api.field_behavior) = REQUIRED];
  // The update mask specifies the subset of fields that should be modified.
  //
  // For more information about this field, see
  // https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#field-mask.
  google.protobuf.FieldMask update_mask = 2 [(google.api.field_behavior) = REQUIRED];
}

// UpdateOrganizationPipelineResponse contains the updated pipeline.
message UpdateOrganizationPipelineResponse {
  // The updated pipeline resource.
  Pipeline pipeline = 1;
}

// DeleteOrganizationPipelineRequest represents a request to delete a pipeline
// owned by an organization.
message DeleteOrganizationPipelineRequest {
  // The resource name of the pipeline, which allows its access by parent
  // organization and ID.
  // - Format: `organizations/{organization.id}/pipelines/{pipeline.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_pipeline_name"}
    }
  ];
}

// DeleteOrganizationPipelineResponse is an empty response.
message DeleteOrganizationPipelineResponse {}

// ValidateOrganizationPipelineRequest represents a request to validate a
// pipeline owned by an organization.
message ValidateOrganizationPipelineRequest {
  // The resource name of the pipeline, which allows its access by parent
  // organization and ID.
  // - Format: `organizations/{organization.id}/pipelines/{pipeline.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_pipeline_name"}
    }
  ];
}

// ValidateOrganizationPipelineResponse contains a validated pipeline.
message ValidateOrganizationPipelineResponse {
  // Success
  bool success = 1;
  // The validated pipeline resource.
  repeated PipelineValidationError errors = 2;
}

// RenameOrganizationPipelineRequest represents a request to rename the name of
// a pipeline owned by an organization.
message RenameOrganizationPipelineRequest {
  // The resource name of the pipeline, which allows its access by parent
  // organization and ID.
  // - Format: `organizations/{organization.id}/pipelines/{pipeline.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_pipeline_name"}
    }
  ];
  // The new resource ID. This will transform the resource name into
  // `organizations/{organization.id}/pipelines/{new_pipeline_id}`.
  string new_pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];
}

// RenameOrganizationPipelineResponse contains a renamed pipeline.
message RenameOrganizationPipelineResponse {
  // The renamed pipeline resource.
  Pipeline pipeline = 1;
}

// CloneOrganizationPipelineRequest represents a request to clone a pipeline
// owned by an organization.
message CloneOrganizationPipelineRequest {
  // The resource name of the pipeline, which allows its access by parent
  // organization and ID.
  // - Format: `organizations/{organization.id}/pipelines/{pipeline.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "org_pipeline_name"}
    }
  ];
  // The target pipeline. It can be under a user or an organization
  // namespace, so the following formats are accepted:
  // - `{user.id}/{pipeline.id}`
  // - `{organization.id}/{pipeline.id}`
  string target = 2 [(google.api.field_behavior) = REQUIRED];
  // Pipeline description.
  string description = 3 [(google.api.field_behavior) = OPTIONAL];
  // Pipeline sharing information.
  Sharing sharing = 4 [(google.api.field_behavior) = OPTIONAL];
}

// CloneOrganizationPipelineResponse contains a cloned pipeline.
message CloneOrganizationPipelineResponse {}

// CloneOrganizationPipelineReleaseRequest represents a request to clone a pipeline
// release owned by an organization.
message CloneOrganizationPipelineReleaseRequest {
  // The resource name of the pipeline release
  // - Format: `organizations/{org.id}/pipelines/{pipeline.id}/releases/{version}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "org_pipeline_release_name"}
    }
  ];
  // The target pipeline. It can be under a user or an organization
  // namespace, so the following formats are accepted:
  // - `{user.id}/{pipeline.id}`
  // - `{organization.id}/{pipeline.id}`
  string target = 2 [(google.api.field_behavior) = REQUIRED];
  // Pipeline description.
  string description = 3 [(google.api.field_behavior) = OPTIONAL];
  // Pipeline sharing information.
  Sharing sharing = 4 [(google.api.field_behavior) = OPTIONAL];
}

// CloneOrganizationPipelineReleaseResponse contains a cloned pipeline.
message CloneOrganizationPipelineReleaseResponse {}

// TriggerOrganizationPipelineRequest represents a request to trigger an
// organization-owned pipeline synchronously.
message TriggerOrganizationPipelineRequest {
  // The resource name of the pipeline, which allows its access by parent
  // organization and ID.
  // - Format: `organizations/{organization.id}/pipelines/{pipeline.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_pipeline_name"}
    }
  ];
  // Pipeline input parameters, it will be deprecated soon.
  repeated google.protobuf.Struct inputs = 2;
  // Data
  repeated TriggerData data = 3;
}

// TriggerOrganizationPipelineResponse contains the pipeline execution results,
// i.e., the multiple model inference outputs.
message TriggerOrganizationPipelineResponse {
  // Model inference outputs.
  repeated google.protobuf.Struct outputs = 1;
  // Traces of the pipeline inference.
  TriggerMetadata metadata = 2;
}

// TriggerOrganizationPipelineRequest represents a request to trigger an
// organization-owned pipeline synchronously.
message TriggerOrganizationPipelineStreamRequest {
  // The resource name of the pipeline, which allows its access by parent
  // organization and ID.
  // - Format: `organizations/{organization.id}/pipelines/{pipeline.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_pipeline_name"}
    }
  ];
  // Pipeline input parameters, it will be deprecated soon.
  repeated google.protobuf.Struct inputs = 2;
  // Data
  repeated TriggerData data = 3;
}

// TriggerOrganizationPipelineResponse contains the pipeline execution results,
// i.e., the multiple model inference outputs.
message TriggerOrganizationPipelineStreamResponse {
  // Model inference outputs.
  repeated google.protobuf.Struct outputs = 1;
  // Traces of the pipeline inference.
  TriggerMetadata metadata = 2;
}

// TriggerOrganizationPipelineRequest represents a request to trigger an
// organization-owned pipeline synchronously.
message TriggerAsyncOrganizationPipelineRequest {
  // The resource name of the pipeline, which allows its access by parent
  // organization and ID.
  // - Format: `organizations/{organization.id}/pipelines/{pipeline.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_pipeline_name"}
    }
  ];
  // Pipeline input parameters, it will be deprecated soon.
  repeated google.protobuf.Struct inputs = 2;
  // Data
  repeated TriggerData data = 3;
}

// TriggerAsyncOrganizationPipelineResponse contains the information to access
// the status of an asynchronous pipeline execution.
message TriggerAsyncOrganizationPipelineResponse {
  // Long-running operation information.
  google.longrunning.Operation operation = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// CreateOrganizationPipelineReleaseRequest represents a request to release a
// version in an organization-owned pipeline.
message CreateOrganizationPipelineReleaseRequest {
  // The release information.
  PipelineRelease release = 1;
  // Name of the pipeline for which the release will be created.
  // Format: `organizations/{organization.id}/pipelines/{pipeline.id}`
  string parent = 2 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {child_type: "api.instill.tech/PipelineRelease"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_name"}
    }
  ];
}

// CreateOrganizationPipelineReleaseResponse contains the created release.
message CreateOrganizationPipelineReleaseResponse {
  // The created pipeline release object.
  PipelineRelease release = 1;
}

// ListOrganizationPipelineReleasesRequest represents a request to list the
// releases in an organization-owned pipeline.
message ListOrganizationPipelineReleasesRequest {
  // The maximum number of releases to return. If this parameter is
  // unspecified, at most 10 pipelines will be returned. The cap value for this
  // parameter is 100 (i.e. any value above that will be coerced to 100).
  optional int32 page_size = 1 [(google.api.field_behavior) = OPTIONAL];
  // Page token.
  optional string page_token = 2 [(google.api.field_behavior) = OPTIONAL];
  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 3 [(google.api.field_behavior) = OPTIONAL];
  // Filter can hold an [AIP-160](https://google.aip.dev/160)-compliant filter
  // expression.
  // - Example: `create_time>timestamp("2000-06-19T23:31:08.657Z")`.
  optional string filter = 4 [(google.api.field_behavior) = OPTIONAL];
  // The parent resource where this pipeline release will be created.
  // Format: `organizations/{organization.id}/pipelines/{pipeline.id}`
  string parent = 5 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {child_type: "api.instill.tech/PipelineRelease"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_name"}
    }
  ];
  // Include soft-deleted pipelines in the result.
  optional bool show_deleted = 6 [(google.api.field_behavior) = OPTIONAL];
}

// ListOrganizationPipelineReleasesResponse contains a list of pipeline releases.
message ListOrganizationPipelineReleasesResponse {
  // A list of pipeline release resources.
  repeated PipelineRelease releases = 1;
  // Next page token.
  string next_page_token = 2;
  // Total number of pipeline releases.
  int32 total_size = 3;
}

// GetOrganizationPipelineReleaseRequest represents a request to fetchthe
// details of a release in an organization-owned pipeline.
message GetOrganizationPipelineReleaseRequest {
  // The resource name of the pipeline release, which allows its access by
  // parent pipeline and ID.
  // - Format:
  // `organizations/{organization.id}/pipelines/{pipeline.id}/releases/{release.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/PipelineRelease"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_pipeline_release_name"}
    }
  ];
  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 2 [(google.api.field_behavior) = OPTIONAL];
}

// GetOrganizationPipelineReleaseResponse contains the requested pipeline release.
message GetOrganizationPipelineReleaseResponse {
  // The pipeline release resource.
  PipelineRelease release = 1;
}

// UpdateOrganizationPipelineReleaseRequest represents a request to update an
// organization-owned pipeline release.
message UpdateOrganizationPipelineReleaseRequest {
  // The pipeline release fields that will replace the existing ones.
  // A pipeline release resource to update
  PipelineRelease release = 1 [(google.api.field_behavior) = REQUIRED];
  // The update mask specifies the subset of fields that should be modified.
  //
  // For more information about this field, see
  // https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#field-mask.
  google.protobuf.FieldMask update_mask = 2 [(google.api.field_behavior) = REQUIRED];
}

// UpdateOrganizationPipelineReleaseResponse contains the updated pipeline
// release.
message UpdateOrganizationPipelineReleaseResponse {
  // The updated pipeline release resource.
  PipelineRelease release = 1;
}

// DeleteOrganizationPipelineReleaseRequest represents a request to delete a
// release in an organization-owned pipeline.
message DeleteOrganizationPipelineReleaseRequest {
  // The resource name of the pipeline release, which allows its access by
  // parent pipeline and ID.
  // - Format:
  // `organizations/{organization.id}/pipelines/{pipeline.id}/releases/{release.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/PipelineRelease"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_pipeline_release_name"}
    }
  ];
}

// DeleteOrganizationPipelineReleaseResponse is an empty response.
message DeleteOrganizationPipelineReleaseResponse {}

// RestoreOrganizationPipelineReleaseRequest represents a request to set the
// version of an organization-owned pipeline to a pinned release.
message RestoreOrganizationPipelineReleaseRequest {
  // The resource name of the pipeline release, which allows its access by
  // parent pipeline and ID.
  // - Format:
  // `organizations/{organization.id}/pipelines/{pipeline.id}/releases/{release.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/PipelineRelease"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_pipeline_release_name"}
    }
  ];
}

// RestoreOrganizationPipelineReleaseResponse contains the requested pipeline
// release.
message RestoreOrganizationPipelineReleaseResponse {
  // The pipeline release resource.
  PipelineRelease release = 1;
}

// RenameOrganizationPipelineReleaseRequest represents a request to rename a
// release in an organization-owned pipeline.
message RenameOrganizationPipelineReleaseRequest {
  // The resource name of the pipeline release, which allows its access by
  // parent pipeline and ID.
  // - Format:
  // `organizations/{organization.id}/pipelines/{pipeline.id}/releases/{release.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/PipelineRelease"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_pipeline_release_name"}
    }
  ];
  // The new resource ID. This will transform the resource name into
  // `organizations/{organization.id}/pipelines/{pipeline.id}/releases{new_release_id}`.
  string new_pipeline_release_id = 2 [(google.api.field_behavior) = REQUIRED];
}

// RenameOrganizationPipelineReleaseResponse contains a renamed pipeline release.
message RenameOrganizationPipelineReleaseResponse {
  // The renamed pipeline release.
  PipelineRelease release = 1;
}

// TriggerOrganizationPipelineReleaseRequest represents a request to trigger a
// pinned release of an organization-owned pipeline.
message TriggerOrganizationPipelineReleaseRequest {
  // The resource name of the pipeline release, which allows its access by
  // parent pipeline and ID.
  // - Format:
  // `organizations/{organization.id}/pipelines/{pipeline.id}/releases/{release.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/PipelineRelease"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_pipeline_release_name"}
    }
  ];
  // Pipeline input parameters, it will be deprecated soon.
  repeated google.protobuf.Struct inputs = 2;
  // Data
  repeated TriggerData data = 3;
}

// TriggerOrganizationPipelineReleaseResponse contains the pipeline execution
// results, i.e., the multiple model inference outputs.
message TriggerOrganizationPipelineReleaseResponse {
  // Model inference outputs.
  repeated google.protobuf.Struct outputs = 1;
  // Traces of the pipeline inference.
  TriggerMetadata metadata = 2;
}

// TriggerOrganizationPipelineReleaseRequest represents a request to trigger a
// pinned release of an organization-owned pipeline asynchronously.
message TriggerAsyncOrganizationPipelineReleaseRequest {
  // The resource name of the pipeline release, which allows its access by
  // parent pipeline and ID.
  // - Format:
  // `organizations/{organization.id}/pipelines/{pipeline.id}/releases/{release.id}`.
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/PipelineRelease"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "organization_pipeline_release_name"}
    }
  ];
  // Pipeline input parameters, it will be deprecated soon.
  repeated google.protobuf.Struct inputs = 2;
  // Data
  repeated TriggerData data = 3;
}

// TriggerAsyncOrganizationPipelineReleaseResponse contains the information to
// access the status of an asynchronous pipeline execution.
message TriggerAsyncOrganizationPipelineReleaseResponse {
  // Long-running operation information.
  google.longrunning.Operation operation = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// GetOperationRequest represents a request to query a long-running operation.
message GetOperationRequest {
  // The name of the operation resource. Asynchronous methods will contain this
  // information in their response.
  string operation_id = 1 [(google.api.field_behavior) = REQUIRED];
}

// GetOperationResponse contains the long-running operation details.
message GetOperationResponse {
  // The long-running operation.
  google.longrunning.Operation operation = 1 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// ========== Private endpoints

// ListPipelinesAdminRequest represents a request by an admin to list all the
// pipelines. Admin users have access to pipelines from any user.
message ListPipelinesAdminRequest {
  // The maximum number of pipelines to return. If this parameter is
  // unspecified, at most 10 pipelines will be returned. The cap value for this
  // parameter is 100 (i.e. any value above that will be coerced to 100).
  optional int32 page_size = 1 [(google.api.field_behavior) = OPTIONAL];
  // Page token.
  optional string page_token = 2 [(google.api.field_behavior) = OPTIONAL];
  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 3 [(google.api.field_behavior) = OPTIONAL];
  // Filter can hold an [AIP-160](https://google.aip.dev/160)-compliant filter
  // expression.
  // - Example: `create_time>timestamp("2000-06-19T23:31:08.657Z")`.
  // - Example:
  // `recipe.components.definition_name:"operator-definitions/2ac8be70-0f7a-4b61-a33d-098b8acfa6f3"`.
  optional string filter = 4 [(google.api.field_behavior) = OPTIONAL];
  // Include soft-deleted pipelines in the result.
  optional bool show_deleted = 5 [(google.api.field_behavior) = OPTIONAL];
}

// ListPipelinesAdminResponse contains a list of pipelines requested by an
// admin user.
// For the moment, the pipeline recipes will be UID-based (permalink) instead
// of name-based. This is a temporary solution.
message ListPipelinesAdminResponse {
  // A list of pipeline resources.
  repeated Pipeline pipelines = 1;
  // Next page token.
  string next_page_token = 2;
  // Total number of pipelines.
  int32 total_size = 3;
}

// ListPipelinesReleaseAdminRequest represents a request by an admin to list
// all pipeline releases. Admin users have access to pipelines from any user.
message ListPipelineReleasesAdminRequest {
  // The maximum number of releases to return. If this parameter is
  // unspecified, at most 10 releases will be returned. The cap value for this
  // parameter is 100 (i.e. any value above that will be coerced to 100).
  optional int32 page_size = 1 [(google.api.field_behavior) = OPTIONAL];
  // Page token.
  optional string page_token = 2 [(google.api.field_behavior) = OPTIONAL];
  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 3 [(google.api.field_behavior) = OPTIONAL];
  // Filter can hold an [AIP-160](https://google.aip.dev/160)-compliant filter
  // expression.
  // - Example: `create_time>timestamp("2000-06-19T23:31:08.657Z")`.
  optional string filter = 4 [(google.api.field_behavior) = OPTIONAL];
  // Include soft-deleted pipelines in the result.
  optional bool show_deleted = 5 [(google.api.field_behavior) = OPTIONAL];
}

// ListPipelineReleasesAdminResponse contains a list of pipeline releases
// requested by an admin user.
// For the moment, the pipeline recipes will be UID-based (permalink) instead
// of name-based. This is a temporary solution.
message ListPipelineReleasesAdminResponse {
  // A list of pipeline releases.
  repeated PipelineRelease releases = 1;
  // Next page token.
  string next_page_token = 2;
  // Total number of pipeline releases.
  int32 total_size = 3;
}

// LookUpPipelineAdminRequest represents a request by an admin to query a
// pipeline by its UID.
message LookUpPipelineAdminRequest {
  // The permalink of the pipeline, which allows its access by UID.
  // - Format: `pipelines/{pipeline.uid}`.
  string permalink = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {type: "api.instill.tech/Pipeline"},
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      field_configuration: {path_param_name: "pipeline_permalink"}
    }
  ];
  // View allows clients to specify the desired pipeline view in the response.
  optional Pipeline.View view = 2 [(google.api.field_behavior) = OPTIONAL];
}

// LookUpPipelineAdminResponse contains the requested pipeline.
message LookUpPipelineAdminResponse {
  // The requested pipeline.
  Pipeline pipeline = 1;
}

// ListPipelineRunsRequest is the request message for ListPipelineRuns.
message ListPipelineRunsRequest {
  // The ID of the owner of the pipeline.
  string namespace_id = 1 [(google.api.field_behavior) = REQUIRED];
  // The ID of the pipeline for which the runs will be listed.
  string pipeline_id = 2 [(google.api.field_behavior) = REQUIRED];
  // The page number to retrieve.
  int32 page = 3 [(google.api.field_behavior) = OPTIONAL];

  // The maximum number of items per page to return. The default and cap values
  // are 10 and 100, respectively.
  int32 page_size = 4 [(google.api.field_behavior) = OPTIONAL];

  // View allows clients to specify the desired run view in the response.
  // The basic view excludes input / output data.
  optional Pipeline.View view = 5 [(google.api.field_behavior) = OPTIONAL];
  // Filter can hold an [AIP-160](https://google.aip.dev/160)-compliant filter
  // expression.
  // - Example: `create_time>timestamp("2000-06-19T23:31:08.657Z")`.
  optional string filter = 6 [(google.api.field_behavior) = OPTIONAL];
  // Order by field, with options for ordering by `id`, `create_time` or `update_time`.
  // Format: `order_by=id` or `order_by=create_time desc`, default is `asc`.
  optional string order_by = 7 [(google.api.field_behavior) = OPTIONAL];
}

// ListPipelineRunsResponse is the response message for ListPipelineRuns.
message ListPipelineRunsResponse {
  // The list of pipeline runs.
  repeated PipelineRun pipeline_runs = 1 [(google.api.field_behavior) = OUTPUT_ONLY];

  // The total number of pipeline runs matching the request.
  int64 total_size = 2 [(google.api.field_behavior) = OUTPUT_ONLY];

  // The current page number.
  int32 page = 3 [(google.api.field_behavior) = OUTPUT_ONLY];

  // The number of items per page.
  int32 page_size = 4 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// ListComponentRunsRequest is the request message for ListComponentRuns.
message ListComponentRunsRequest {
  // The unique identifier of the pipeline run to list component runs for.
  string pipeline_run_id = 1 [(google.api.field_behavior) = REQUIRED];

  // The page number to retrieve.
  optional int32 page = 2 [(google.api.field_behavior) = OPTIONAL];

  // The maximum number of items per page to return. The default and cap values
  // are 10 and 100, respectively.
  optional int32 page_size = 3 [(google.api.field_behavior) = OPTIONAL];
  // Filter can hold an [AIP-160](https://google.aip.dev/160)-compliant filter
  // expression.
  // - Example: `create_time>timestamp("2000-06-19T23:31:08.657Z")`.
  optional string filter = 4 [(google.api.field_behavior) = OPTIONAL];
  // Order by field, with options for ordering by `id`, `create_time` or `update_time`.
  // Format: `order_by=id` or `order_by=create_time desc`, default is `asc`.
  optional string order_by = 5 [(google.api.field_behavior) = OPTIONAL];

  // View allows clients to specify the desired run view in the response.
  // The basic view excludes input / output data.
  optional Pipeline.View view = 6 [(google.api.field_behavior) = OPTIONAL];
}

// ListComponentRunsResponse is the response message for ListComponentRuns.
message ListComponentRunsResponse {
  // The list of component runs.
  repeated ComponentRun component_runs = 1 [(google.api.field_behavior) = OUTPUT_ONLY];

  // The total number of component runs matching the request.
  int64 total_size = 2 [(google.api.field_behavior) = OUTPUT_ONLY];

  // The current page number.
  int32 page = 3 [(google.api.field_behavior) = OUTPUT_ONLY];

  // The number of items per page.
  int32 page_size = 4 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// FileReference represents metadata for a file.
message FileReference {
  // Name of the file.
  string name = 1 [(google.api.field_behavior) = REQUIRED];

  // Format of the file (e.g., PDF, TXT, JPG).
  string type = 2 [(google.api.field_behavior) = REQUIRED];

  // Size of the file in bytes.
  int64 size = 3 [(google.api.field_behavior) = REQUIRED];

  // URL of the file (e.g., S3 URL).
  string url = 4 [(google.api.field_behavior) = REQUIRED];
}

// PipelineRun represents a single execution of a pipeline.
message PipelineRun {
  // Unique identifier for the pipeline.
  string pipeline_uid = 1 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Unique identifier for each run.
  string pipeline_run_uid = 2 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Pipeline version used in the run.
  string pipeline_version = 3 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Current status of the run.
  common.run.v1alpha.RunStatus status = 4 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Origin of the run.
  common.run.v1alpha.RunSource source = 5 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Time taken to complete the run in milliseconds.
  optional int32 total_duration = 6 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (google.api.field_behavior) = OPTIONAL
  ];

  // Runner ID. If current viewing requester does not have enough permission, it will return null.
  optional string runner_id = 7 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (google.api.field_behavior) = OPTIONAL
  ];

  // Input files for the run.
  repeated FileReference inputs_reference = 9 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Pipeline input parameters.
  repeated google.protobuf.Struct inputs = 10 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (google.api.field_behavior) = OPTIONAL
  ];

  // Output files from the run.
  repeated FileReference outputs_reference = 11 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Pipeline inference outputs.
  repeated google.protobuf.Struct outputs = 12 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (google.api.field_behavior) = OPTIONAL
  ];

  // Snapshot of the pipeline recipe used for this run.
  google.protobuf.Struct recipe_snapshot = 13 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Time when the run started execution.
  google.protobuf.Timestamp start_time = 14 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Time when the run completed.
  optional google.protobuf.Timestamp complete_time = 15 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (google.api.field_behavior) = OPTIONAL
  ];

  // Error message if the run failed.
  optional string error = 16 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (google.api.field_behavior) = OPTIONAL
  ];

  // Credits used of internal accounting metric.
  optional float credit_amount = 17 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (google.api.field_behavior) = OPTIONAL
  ];
  // Data specifications.
  DataSpecification data_specification = 18 [(google.api.field_behavior) = OUTPUT_ONLY];
}

// ComponentRun represents the execution details of a single component within a pipeline run.
message ComponentRun {
  // Links to the parent PipelineRun.
  string pipeline_run_uid = 1 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Unique identifier for each pipeline component.
  string component_id = 2 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Completion status of the component.
  common.run.v1alpha.RunStatus status = 3 [(google.api.field_behavior) = OUTPUT_ONLY];

  // Time taken to execute the component in milliseconds.
  optional int32 total_duration = 4 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (google.api.field_behavior) = OPTIONAL
  ];

  // Time when the component started execution.
  google.protobuf.Timestamp start_time = 5 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Time when the component finished execution.
  optional google.protobuf.Timestamp complete_time = 6 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (google.api.field_behavior) = OPTIONAL
  ];

  // Error message if the component failed.
  optional string error = 7 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (google.api.field_behavior) = OPTIONAL
  ];

  // Input files for the run.
  repeated FileReference inputs_reference = 8 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Component input parameters.
  repeated google.protobuf.Struct inputs = 9 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (google.api.field_behavior) = OPTIONAL
  ];

  // Output files from the run.
  repeated FileReference outputs_reference = 10 [(google.api.field_behavior) = OUTPUT_ONLY];
  // Component inference outputs.
  repeated google.protobuf.Struct outputs = 11 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (google.api.field_behavior) = OPTIONAL
  ];

  // Credits used of internal accounting metric.
  optional float credit_amount = 12 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (google.api.field_behavior) = OPTIONAL
  ];
}
