---
title: "Gemini"
lang: "en-US"
draft: false
description: "Learn about how to set up a Gemini component https://github.com/instill-ai/instill-core"
---

The Gemini component is an AI component that allows users to connect to Google's Gemini multimodal AI models.
It can carry out the following tasks:
- [Chat](#chat)
- [Cache](#cache)
- [Text Embeddings](#text-embeddings)

## Release Stage

`Alpha`

## Configuration

The component definition and tasks are defined in the [definition.yaml](https://github.com/instill-ai/pipeline-backend/blob/main/pkg/component/ai/gemini/v0/config/definition.yaml) and [tasks.yaml](https://github.com/instill-ai/pipeline-backend/blob/main/pkg/component/ai/gemini/v0/config/tasks.yaml) files respectively.


## Setup


In order to communicate with Google, the following connection details need to be
provided. You may specify them directly in a pipeline recipe as key-value pairs
within the component's `setup` block, or you can create a **Connection** from
the [**Integration Settings**](https://docs.instill-ai.com/docs/set-up-component)
page and reference the whole `setup` as `setup:
${connection.<my-connection-id>}`.

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| API Key | `api-key` | string | Fill in your Gemini API key. To find your keys, visit your Gemini's API Keys page. |
</div>



## Supported Tasks

### Chat

Gemini's multimodal models understand text and images. They generate text outputs in response to prompts that can include text and images. The inputs to these models are also referred to as "prompts". Designing a prompt is how you guide the model, usually by providing instructions or examples to successfully complete a task.

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Input | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Task ID (required) | `task` | string | `TASK_CHAT` |
| Model (required) | `model` | string | ID of the model to use. The value is one of the following:   `gemini-2.5-pro`: Optimized for enhanced thinking and reasoning, multimodal understanding, advanced coding, and more.   `gemini-2.5-flash`: Optimized for adaptive thinking, cost efficiency.   `gemini-2.5-flash-lite`: Optimized for most cost-efficient model supporting high throughput.   `gemini-2.5-flash-image-preview`: Optimized for precise, conversational image generation and editing. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`gemini-2.5-pro`</li><li>`gemini-2.5-flash`</li><li>`gemini-2.5-flash-lite`</li><li>`gemini-2.5-flash-image-preview`</li></ul></details> |
| Stream | `stream` | boolean | Whether to incrementally stream the response using server-sent events (SSE). |
| Prompt | `prompt` | string | The main text instruction or query for the model. |
| Images | `images` | array[string] | URI references or base64 content of input images. |
| Audio | `audio` | array[string] | URI references or base64 content of input audio. |
| Videos | `videos` | array[string] | URI references or base64 content of input videos. |
| Documents | `documents` | array[string] | URI references or base64 content of input documents.  Different vendors might have different constraints on the document format.  For example, Gemini supports only PDF. |
| System Message | `system-message` | string | Instruction to set the assistant's behavior, tone, or persona. Different vendors might name this field differently. |
| [Chat History](#chat-chat-history) | `chat-history` | array[object] | Conversation history, each message includes a role and content. |
| Max Output Token | `max-output-tokens` | integer | The maximum number of tokens to generate in the model output. |
| Temperature | `temperature` | number | A parameter that controls the randomness and creativity of a large language model's output by adjusting the probability of the next word it chooses. A low temperature (e.g., near 0) produces more deterministic, focused, and consistent text, while a high temperature (e.g., near 1) leads to more creative, random, and varied output. |
| Top-K | `top-k` | integer | A text generation parameter that limits the selection of the next token to the K most probable tokens,  discarding the rest to control randomness and maintain coherence. By specifying a fixed number of top tokens,  `top-k` acts as a "safety net," preventing nonsensical choices, but a small K can also stifle creativity  and lead to repetitive outputs. It is often used in conjunction with other parameters like temperature and  `top-p` to fine-tune the LLM's output.  Note that OpenAI and Mistral models don't have the `top-k` exposed. |
| Top-P | `top-p` | number | A parameter, also known as nucleus sampling, that controls the randomness and creativity of  the generated text by selecting a dynamic subset of tokens. It works by sorting all possible  next tokens by their probability, and then summing their probabilities from highest to lowest  until the cumulative sum reaches the specified `top-p` value (a number between 0 and 1). The model then randomly selects the next token only from this "nucleus" of high-probability  tokens. A higher `top-p` value creates a larger, more diverse set of possible words, leading  to more creative and potentially unpredictable output, while a lower `top-p` value restricts  the choice to a smaller, more focused set of highly probable words, resulting in more factual  and conservative output. |
| Seed | `seed` | integer | A random seed used to control the stochasticity of text generation to produce repeatable outputs |
| [Contents](#chat-contents) | `contents` | array[object] | The input contents to the model. Each item represents a user or model turn composed of parts (text or images). |
| [Tools](#chat-tools) | `tools` | array[object] | Tools available to the model, e.g., function declarations. |
| [Tool Config](#chat-tool-config) | `tool-config` | object | Configuration for tool usage and function calling. |
| [Safety Settings](#chat-safety-settings) | `safety-settings` | array[object] | Safety settings for content filtering. |
| [System Instruction](#chat-system-instruction) | `system-instruction` | object | A system instruction to guide the model behavior. |
| [Generation Config](#chat-generation-config) | `generation-config` | object | Generation configuration for the request. |
| Cached Content | `cached-content` | string | The name of a cached content to use as context. Format: cachedContents/\{cachedContent\}. |

</div>
<details>
<summary> Input Objects in Chat</summary>

<h4 id="chat-chat-history">Chat History</h4>

Conversation history, each message includes a role and content.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Parts](#chat-parts) | `parts` | array | Parts of the content. |
| Role | `role` | string | The producer of the content. Must be either 'user' or 'model'. Useful to set for multi-turn conversations, otherwise can be left blank or unset. Optional. The value is one of the following:   `USER`: User content.   `MODEL`: Model content. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`USER`</li><li>`MODEL`</li></ul></details> |
</div>
<h4 id="chat-parts">Parts</h4>

Parts of the content.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Thought | `thought` | boolean | Indicates if the part is a thought from the model. |
| Thought Signature | `thought-signature` | string | Opaque signature for the thought (base64-encoded bytes). |
| [Video Metadata](#chat-video-metadata) | `video-metadata` | object | Optional video metadata (only with blob or fileData video content). |
</div>
<h4 id="chat-video-metadata">Video Metadata</h4>

Optional video metadata (only with blob or fileData video content).


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| End Offset | `end-offset` | string | The end offset of the video (duration string, e.g. "3.5s"). |
| FPS | `fps` | number | Frame rate of the video sent to the model. Range (0.0, 24.0]. |
| Start Offset | `start-offset` | string | The start offset of the video (duration string, e.g. "3.5s"). |
</div>
<h4 id="chat-contents">Contents</h4>

The input contents to the model. Each item represents a user or model turn composed of parts (text or images).


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Parts](#chat-parts) | `parts` | array | Parts of the content. |
| Role | `role` | string | The producer of the content. Must be either 'user' or 'model'. Useful to set for multi-turn conversations, otherwise can be left blank or unset. Optional. The value is one of the following:   `USER`: User content.   `MODEL`: Model content. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`USER`</li><li>`MODEL`</li></ul></details> |
</div>
<h4 id="chat-parts">Parts</h4>

Parts of the content.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Thought | `thought` | boolean | Indicates if the part is a thought from the model. |
| Thought Signature | `thought-signature` | string | Opaque signature for the thought (base64-encoded bytes). |
| [Video Metadata](#chat-video-metadata) | `video-metadata` | object | Optional video metadata (only with blob or fileData video content). |
</div>
<h4 id="chat-video-metadata">Video Metadata</h4>

Optional video metadata (only with blob or fileData video content).


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| End Offset | `end-offset` | string | The end offset of the video (duration string, e.g. "3.5s"). |
| FPS | `fps` | number | Frame rate of the video sent to the model. Range (0.0, 24.0]. |
| Start Offset | `start-offset` | string | The start offset of the video (duration string, e.g. "3.5s"). |
</div>
<h4 id="chat-tools">Tools</h4>

Tools available to the model, e.g., function declarations.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Code Execution | `code-execution` | object | Tool that executes code generated by the model, and automatically returns the result to the model. |
| [Function Declarations](#chat-function-declarations) | `function-declarations` | array | Functions the model may call. |
| [Google Search](#chat-google-search) | `google-search` | object | GoogleSearch tool type. Tool to support Google Search in Model. Powered by Google. |
| [Google Search Retrieval](#chat-google-search-retrieval) | `google-search-retrieval` | object | Tool to retrieve public web data for grounding, powered by Google. |
| URL Context | `url-context` | object | Tool to support URL context retrieval. |
</div>
<h4 id="chat-function-declarations">Function Declarations</h4>

Functions the model may call.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Description | `description` | string | A brief description of the function. |
| Name | `name` | string | The name of the function to call. |
| [Parameters](#chat-parameters) | `parameters` | object | Describes the parameters to this function. Reflects the Open API 3.03 Parameter Object string Key: the name of the parameter.  Parameter names are case sensitive. Schema Value: the Schema defining the type used for the parameter. |
</div>
<h4 id="chat-parameters">Parameters</h4>

Describes the parameters to this function. Reflects the Open API 3.03 Parameter Object string Key: the name of the parameter.  Parameter names are case sensitive. Schema Value: the Schema defining the type used for the parameter.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Any Of](#chat-any-of) | `anyOf` | array | Value must satisfy any of the sub-schemas. |
| Default | `default` | object | Default value for the field (ignored for validation). |
| Description | `description` | string | Optional description of the schema. |
| Enum | `enum` | array | Enum values for STRING with enum format. |
| Format | `format` | string | Optional format of the data. |
| Items | `items` | object | Schema of elements for ARRAY type. |
| Max Items | `max-items` | integer | Maximum number of elements for ARRAY type. |
| Max Length | `max-length` | integer | Maximum length for STRING type. |
| Max Properties | `max-properties` | integer | Maximum number of properties for OBJECT type. |
| Maximum | `maximum` | number | Maximum value for INTEGER/NUMBER types. |
| Min Items | `min-items` | integer | Minimum number of elements for ARRAY type. |
| Min Length | `min-length` | integer | Minimum length for STRING type. |
| Min Properties | `min-properties` | integer | Minimum number of properties for OBJECT type. |
| Minimum | `minimum` | number | Minimum value for INTEGER/NUMBER types. |
| Nullable | `nullable` | boolean | Indicates if the value may be null. |
| Pattern | `pattern` | string | Regex pattern constraint for STRING type. |
| Properties | `properties` | object | Properties for OBJECT type. |
| Property Ordering | `property-ordering` | array | Order of properties for OBJECT type (non-standard). |
| Required | `required` | array | Required properties for OBJECT type. |
| Title | `title` | string | Optional title of the schema. |
| Type | `type` | string | Required data type of the schema. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`TYPE_UNSPECIFIED`</li><li>`STRING`</li><li>`NUMBER`</li><li>`INTEGER`</li><li>`BOOLEAN`</li><li>`ARRAY`</li><li>`OBJECT`</li></ul></details> |
</div>
<h4 id="chat-google-search-retrieval">Google Search Retrieval</h4>

Tool to retrieve public web data for grounding, powered by Google.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Dynamic Retrieval Config](#chat-dynamic-retrieval-config) | `dynamic-retrieval-config` | object | Specifies the dynamic retrieval configuration for the given source. |
</div>
<h4 id="chat-dynamic-retrieval-config">Dynamic Retrieval Config</h4>

Specifies the dynamic retrieval configuration for the given source.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Dynamic Threshold | `dynamic-threshold` | number | The threshold to be used in dynamic retrieval. If not set, a system default value is used. |
| Mode | `mode` | string | The mode of the predictor to be used in dynamic retrieval. The value is one of the following:   `MODE_UNSPECIFIED`: Always trigger retrieval.   `MODE_DYNAMIC`: Run retrieval only when system decides it is necessary. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`MODE_UNSPECIFIED`</li><li>`MODE_DYNAMIC`</li></ul></details> |
</div>
<h4 id="chat-google-search">Google Search</h4>

GoogleSearch tool type. Tool to support Google Search in Model. Powered by Google.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Time Range Filter](#chat-time-range-filter) | `time-range-filter` | object | Filter search results to a specific time range. If customers set a start time, they must set an end time (and vice versa). |
</div>
<h4 id="chat-time-range-filter">Time Range Filter</h4>

Filter search results to a specific time range. If customers set a start time, they must set an end time (and vice versa).


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| End Time | `end-time` | string | Exclusive end of the interval. If specified, a Timestamp matching this interval will have to be before the end. Uses RFC 3339, where generated output will always be Z-normalized and use 0, 3, 6 or 9 fractional digits. Offsets other than "Z" are also accepted. Examples: "2014-10-02T15:01:23Z", "2014-10-02T15:01:23.045123456Z" or "2014-10-02T15:01:23+05:30". |
| Start Time | `start-time` | string | Inclusive start of the interval. If specified, a Timestamp matching this interval will have to be the same or after the start. Uses RFC 3339, where generated output will always be Z-normalized and use 0, 3, 6 or 9 fractional digits. Offsets other than "Z" are also accepted. Examples: "2014-10-02T15:01:23Z", "2014-10-02T15:01:23.045123456Z" or "2014-10-02T15:01:23+05:30". |
</div>
<h4 id="chat-tool-config">Tool Config</h4>

Configuration for tool usage and function calling.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Function Calling Config](#chat-function-calling-config) | `function-calling-config` | object | Configuration for specifying function calling behavior. |
</div>
<h4 id="chat-function-calling-config">Function Calling Config</h4>

Configuration for specifying function calling behavior.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Allowed Function Names | `allowed-function-names` | array | A set of function names that, when provided, limits the functions the model will call. This should only be set when the Mode is ANY or VALIDATED. Function names should match  `[FunctionDeclaration.name]`. When set, model will predict a function call from only allowed function names. |
| Mode | `mode` | string | Specifies the mode in which function calling should execute. If unspecified, the default value will be set to `AUTO`. The value is one of the following:   `MODE_UNSPECIFIED`: Unspecified function calling mode. This value should not be used.   `AUTO`: Default model behavior, model decides to predict either a function call or a natural language response.   `ANY`: Model is constrained to always predicting a function call only. If "allowedFunctionNames" are set, the predicted function call will be limited to any one of "allowedFunctionNames", else the predicted function call will be any one of the provided "functionDeclarations".   `NONE`: Model will not predict any function call. Model behavior is same as when not passing any function declarations.   `VALIDATED`: Model decides to predict either a function call or a natural language response, but will validate function calls with constrained decoding. If "allowedFunctionNames" are set, the predicted function call will be limited to any one of "allowedFunctionNames", else the predicted function call will be any one of the provided "functionDeclarations". <br/><details><summary><strong>Enum values</strong></summary><ul><li>`MODE_UNSPECIFIED`</li><li>`AUTO`</li><li>`ANY`</li><li>`NONE`</li></ul></details> |
</div>
<h4 id="chat-safety-settings">Safety Settings</h4>

Safety settings for content filtering.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Harm Category | `category` | string | The category of a rating for safety. The value is one of the following:   `HARM_CATEGORY_UNSPECIFIED`: Category is unspecified.   `HARM_CATEGORY_DEROGATORY`: PaLM - Negative or harmful comments targeting identity and/or protected attribute.   `HARM_CATEGORY_TOXICITY`: PaLM - Content that is rude, disrespectful, or profane.   `HARM_CATEGORY_VIOLENCE`: PaLM - Describes scenarios depicting violence against an individual or group, or general descriptions of gore.   `HARM_CATEGORY_SEXUAL`: PaLM - Contains references to sexual acts or other lewd content.   `HARM_CATEGORY_MEDICAL`: PaLM - Promotes unchecked medical advice.   `HARM_CATEGORY_DANGEROUS`: PaLM - Dangerous content that promotes, facilitates, or encourages harmful acts.   `HARM_CATEGORY_HARASSMENT`: Gemini - Harassment content.   `HARM_CATEGORY_HATE_SPEECH`: Gemini - Hate speech and content.   `HARM_CATEGORY_SEXUALLY_EXPLICIT`: Gemini - Sexually explicit content.   `HARM_CATEGORY_DANGEROUS_CONTENT`: Gemini - Dangerous content.   `HARM_CATEGORY_CIVIC_INTEGRITY`: Gemini - Content that may be used to harm civic integrity. DEPRECATED: use enableEnhancedCivicAnswers instead. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`HARM_CATEGORY_UNSPECIFIED`</li><li>`HARM_CATEGORY_DEROGATORY`</li><li>`HARM_CATEGORY_TOXICITY`</li><li>`HARM_CATEGORY_VIOLENCE`</li><li>`HARM_CATEGORY_SEXUAL`</li><li>`HARM_CATEGORY_MEDICAL`</li><li>`HARM_CATEGORY_DANGEROUS`</li><li>`HARM_CATEGORY_HARASSMENT`</li><li>`HARM_CATEGORY_HATE_SPEECH`</li><li>`HARM_CATEGORY_SEXUALLY_EXPLICIT`</li><li>`HARM_CATEGORY_DANGEROUS_CONTENT`</li></ul></details> |
| Harm Block Threshold | `threshold` | string | Block at and beyond a specified harm probability. The value is one of the following:   `HARM_BLOCK_THRESHOLD_UNSPECIFIED`: Threshold is unspecified.   `BLOCK_LOW_AND_ABOVE`: Content with NEGLIGIBLE will be allowed.   `BLOCK_MEDIUM_AND_ABOVE`: Content with NEGLIGIBLE and LOW will be allowed.   `BLOCK_ONLY_HIGH`: Content with NEGLIGIBLE, LOW, and MEDIUM will be allowed.   `BLOCK_NONE`: All content will be allowed.   `OFF`: Turn off the safety filter. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`HARM_BLOCK_THRESHOLD_UNSPECIFIED`</li><li>`BLOCK_LOW_AND_ABOVE`</li><li>`BLOCK_MEDIUM_AND_ABOVE`</li><li>`BLOCK_ONLY_HIGH`</li><li>`BLOCK_NONE`</li><li>`OFF`</li></ul></details> |
</div>
<h4 id="chat-system-instruction">System Instruction</h4>

A system instruction to guide the model behavior.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Parts](#chat-parts) | `parts` | array | Parts of the content. |
| Role | `role` | string | The producer of the content. Must be either 'user' or 'model'. Useful to set for multi-turn conversations, otherwise can be left blank or unset. Optional. The value is one of the following:   `USER`: User content.   `MODEL`: Model content. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`USER`</li><li>`MODEL`</li></ul></details> |
</div>
<h4 id="chat-parts">Parts</h4>

Parts of the content.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Thought | `thought` | boolean | Indicates if the part is a thought from the model. |
| Thought Signature | `thought-signature` | string | Opaque signature for the thought (base64-encoded bytes). |
| [Video Metadata](#chat-video-metadata) | `video-metadata` | object | Optional video metadata (only with blob or fileData video content). |
</div>
<h4 id="chat-video-metadata">Video Metadata</h4>

Optional video metadata (only with blob or fileData video content).


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| End Offset | `end-offset` | string | The end offset of the video (duration string, e.g. "3.5s"). |
| FPS | `fps` | number | Frame rate of the video sent to the model. Range (0.0, 24.0]. |
| Start Offset | `start-offset` | string | The start offset of the video (duration string, e.g. "3.5s"). |
</div>
<h4 id="chat-generation-config">Generation Config</h4>

Generation configuration for the request.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Candidate Count | `candidate-count` | integer | Number of candidates to generate. |
| Enable Enhanced Civic Answers | `enable-enhanced-civic-answers` | boolean | Enables enhanced civic answers. |
| Frequency Penalty | `frequency-penalty` | number | Frequency penalty applied proportional to the number of times a token has been seen. |
| Logprobs | `logprobs` | integer | Number of top logprobs to return at each decoding step (1-5). Only valid if response-logprobs is true. |
| Max Output Tokens | `max-output-tokens` | integer | The maximum number of tokens to generate in the response. |
| Media Resolution | `media-resolution` | string | Media resolution for multimodal generation. Controls how many tokens are budgeted for media understanding and reframing. The value is one of the following:   `MEDIA_RESOLUTION_UNSPECIFIED`: Media resolution has not been set.   `MEDIA_RESOLUTION_LOW`: Media resolution set to low (64 tokens).   `MEDIA_RESOLUTION_MEDIUM`: Media resolution set to medium (256 tokens).   `MEDIA_RESOLUTION_HIGH`: Media resolution set to high (zoomed reframing with 256 tokens). <br/><details><summary><strong>Enum values</strong></summary><ul><li>`MEDIA_RESOLUTION_UNSPECIFIED`</li><li>`MEDIA_RESOLUTION_LOW`</li><li>`MEDIA_RESOLUTION_MEDIUM`</li><li>`MEDIA_RESOLUTION_HIGH`</li></ul></details> |
| Presence Penalty | `presence-penalty` | number | Presence penalty applied to next-token logprobs if token already seen. |
| Response Logprobs | `response-logprobs` | boolean | If true, export the logprobs results in response. |
| Response MIME Type | `response-mime-type` | string | Desired response MIME type (e.g., application/json for JSON mode). |
| Response Modalities | `response-modalities` | array | Requested modalities of the response. Empty means text only. |
| [Response Schema](#chat-response-schema) | `response-schema` | object | JSON Schema to constrain the response when using JSON mode. |
| Seed | `seed` | integer | Seed used in decoding. |
| [Speech Config](#chat-speech-config) | `speech-config` | object | Speech generation configuration. |
| Stop Sequences | `stop-sequences` | array | List of sequences that will stop further token generation. |
| Temperature | `temperature` | number | Sampling temperature, controls randomness. |
| [Thinking Config](#chat-thinking-config) | `thinking-config` | object | Config for thinking features. |
| Top K | `top-k` | number | Top-k sampling cutoff. |
| Top P | `top-p` | number | Nucleus sampling probability mass. |
</div>
<h4 id="chat-response-schema">Response Schema</h4>

JSON Schema to constrain the response when using JSON mode.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Any Of](#chat-any-of) | `anyOf` | array | Value must satisfy any of the sub-schemas. |
| Default | `default` | object | Default value for the field (ignored for validation). |
| Description | `description` | string | Optional description of the schema. |
| Enum | `enum` | array | Enum values for STRING with enum format. |
| Format | `format` | string | Optional format of the data. |
| Items | `items` | object | Schema of elements for ARRAY type. |
| Max Items | `max-items` | integer | Maximum number of elements for ARRAY type. |
| Max Length | `max-length` | integer | Maximum length for STRING type. |
| Max Properties | `max-properties` | integer | Maximum number of properties for OBJECT type. |
| Maximum | `maximum` | number | Maximum value for INTEGER/NUMBER types. |
| Min Items | `min-items` | integer | Minimum number of elements for ARRAY type. |
| Min Length | `min-length` | integer | Minimum length for STRING type. |
| Min Properties | `min-properties` | integer | Minimum number of properties for OBJECT type. |
| Minimum | `minimum` | number | Minimum value for INTEGER/NUMBER types. |
| Nullable | `nullable` | boolean | Indicates if the value may be null. |
| Pattern | `pattern` | string | Regex pattern constraint for STRING type. |
| Properties | `properties` | object | Properties for OBJECT type. |
| Property Ordering | `property-ordering` | array | Order of properties for OBJECT type (non-standard). |
| Required | `required` | array | Required properties for OBJECT type. |
| Title | `title` | string | Optional title of the schema. |
| Type | `type` | string | Required data type of the schema. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`TYPE_UNSPECIFIED`</li><li>`STRING`</li><li>`NUMBER`</li><li>`INTEGER`</li><li>`BOOLEAN`</li><li>`ARRAY`</li><li>`OBJECT`</li></ul></details> |
</div>
<h4 id="chat-speech-config">Speech Config</h4>

Speech generation configuration.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Language Code | `language-code` | string | Language code (BCP 47) for speech synthesis. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`de-DE`</li><li>`en-AU`</li><li>`en-GB`</li><li>`en-IN`</li><li>`en-US`</li><li>`es-US`</li><li>`fr-FR`</li><li>`hi-IN`</li><li>`pt-BR`</li><li>`ar-XA`</li><li>`es-ES`</li><li>`fr-CA`</li><li>`id-ID`</li><li>`it-IT`</li><li>`ja-JP`</li><li>`tr-TR`</li><li>`vi-VN`</li><li>`bn-IN`</li><li>`gu-IN`</li><li>`kn-IN`</li><li>`ml-IN`</li><li>`mr-IN`</li><li>`ta-IN`</li><li>`te-IN`</li><li>`nl-NL`</li><li>`ko-KR`</li><li>`cmn-CN`</li><li>`pl-PL`</li><li>`ru-RU`</li><li>`th-TH`</li></ul></details> |
| [Multi Speaker Voice Config](#chat-multi-speaker-voice-config) | `multi-speaker-voice-config` | object | Configuration for the multi-speaker setup. Mutually exclusive with voice-config. |
| Voice Config | `voice-config` |  | Configuration for the voice to use. Union type. |
</div>
<h4 id="chat-multi-speaker-voice-config">Multi Speaker Voice Config</h4>

Configuration for the multi-speaker setup. Mutually exclusive with voice-config.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Speaker Voice Configs](#chat-speaker-voice-configs) | `speaker-voice-configs` | array | All the enabled speaker voices. |
</div>
<h4 id="chat-speaker-voice-configs">Speaker Voice Configs</h4>

All the enabled speaker voices.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Speaker | `speaker` | string | The name of the speaker to use. Should match the name used in the prompt. |
| Voice Config | `voice-config` |  | Configuration for the voice to use. Union type. |
</div>
<h4 id="chat-thinking-config">Thinking Config</h4>

Config for thinking features.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Include Thoughts | `include-thoughts` | boolean | Whether to include thoughts in the response when available. |
| Thinking Budget | `thinking-budget` | integer | The number of thought tokens the model should generate. |
</div>
</details>
<details>
<summary>The <code>parts</code> Object </summary>

<h4 id="chat-parts">Parts</h4>

`parts` must fulfill one of the following schemas:




<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Text | `text` | string | Inline text content. |
</div>




<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Blob | `blob` | object | Raw media bytes. Text should use the 'text' field instead. |
</div>




<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Function Call | `function-call` | object | Predicted function call with name and arguments. |
</div>




<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Function Response | `function-response` | object | Result of a function call with name and structured response. |
</div>




<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| File Data | `file-data` | object | URI-based data reference with MIME type. |
</div>




<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Executable Code | `executable-code` | object | Code generated by the model that is meant to be executed. |
</div>




<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Code Execution Result | `code-execution-result` | object | Result of executing the ExecutableCode. |
</div>
</details>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Output | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Texts (optional) | `texts` | array[string] | Simplified text output extracted from candidates. Each string represents the concatenated text content  from the corresponding candidate's parts, including thought processes when `include-thoughts` is enabled. This field provides easy access to the generated text without needing to traverse the candidate structure.  Updated in real-time during streaming. |
| Images (optional) | `images` | array[image/webp] | Images output extracted and converted from candidates. This field provides easy access to the generated images as base64-encoded strings. The original binary data is removed from the candidates field to prevent raw binary exposure in JSON output.  This field is only available when the model supports image generation. |
| [Usage](#chat-usage) (optional) | `usage` | object | Token usage statistics: prompt tokens, completion tokens, total tokens, etc. This field is a proxy of the original usage-metadata field in Gemini API. |
| [Candidates](#chat-candidates) (optional) | `candidates` | array[object] | Complete candidate objects from the model containing rich metadata and structured content.  Each candidate includes safety ratings, finish reason, token counts, citations, content parts  (including thought processes when include-thoughts is enabled), and other detailed information.  This provides full access to all response data beyond just text. Updated incrementally during  streaming with accumulated content and latest metadata. |
| [Prompt Feedback](#chat-prompt-feedback) (optional) | `prompt-feedback` | object | Feedback on the prompt including any safety blocking information. |
| Model Version (optional) | `model-version` | string | The model version used to generate the response. |
| Response ID (optional) | `response-id` | string | Identifier for this response. |

</div>


<details>
<summary> Output Objects in Chat</summary>

<h4 id="chat-usage">Usage</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Cache Tokens Details](#chat-cache-tokens-details) | `cache-tokens-details` | array | Output only. List of modalities of the cached content in the request input. |
| Cached Content Token Count | `cached-content-token-count` | integer | Number of tokens in the cached part of the prompt (the cached content) |
| Candidates Token Count | `candidates-token-count` | integer | Total number of tokens across all the generated response candidates. |
| [Candidates Tokens Details](#chat-candidates-tokens-details) | `candidates-tokens-details` | array | List of modalities that were returned in the response. |
| Prompt Token Count | `prompt-token-count` | integer | Number of tokens in the prompt. When cachedContent is set, this is still the total effective prompt size meaning this includes the number of tokens in the cached content. |
| [Prompt Tokens Details](#chat-prompt-tokens-details) | `prompt-tokens-details` | array | List of modalities that were processed in the request input. |
| Thoughts Token Count | `thoughts-token-count` | integer | Number of tokens of thoughts for thinking models. |
| Tool-use Prompt Token Count | `tool-use-prompt-token-count` | integer | Number of tokens present in tool-use prompt(s). |
| [Tool-use Prompt Tokens Details](#chat-tool-use-prompt-tokens-details) | `tool-use-prompt-tokens-details` | array | List of modalities that were processed for tool-use request inputs. |
| Total Token Count | `total-token-count` | integer | Total token count for the generation request (prompt + response candidates). |

</div>

<h4 id="chat-prompt-tokens-details">Prompt Tokens Details</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Modality | `modality` | string | Content Part modality. Indicates the media type of a content part. The value is one of the following:   `MODALITY_UNSPECIFIED`:	Unspecified modality.   `TEXT`:	Plain text.   `IMAGE`:	Image.   `VIDEO`:	Video.   `AUDIO`:	Audio.   `DOCUMENT`:	Document, e.g. PDF. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`MODALITY_UNSPECIFIED`</li><li>`TEXT`</li><li>`IMAGE`</li><li>`VIDEO`</li><li>`AUDIO`</li><li>`DOCUMENT`</li></ul></details> |
| Token Count | `token-count` | integer | Number of tokens. |

</div>

<h4 id="chat-cache-tokens-details">Cache Tokens Details</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Modality | `modality` | string | Content Part modality. Indicates the media type of a content part. The value is one of the following:   `MODALITY_UNSPECIFIED`:	Unspecified modality.   `TEXT`:	Plain text.   `IMAGE`:	Image.   `VIDEO`:	Video.   `AUDIO`:	Audio.   `DOCUMENT`:	Document, e.g. PDF. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`MODALITY_UNSPECIFIED`</li><li>`TEXT`</li><li>`IMAGE`</li><li>`VIDEO`</li><li>`AUDIO`</li><li>`DOCUMENT`</li></ul></details> |
| Token Count | `token-count` | integer | Number of tokens. |

</div>

<h4 id="chat-candidates-tokens-details">Candidates Tokens Details</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Modality | `modality` | string | Content Part modality. Indicates the media type of a content part. The value is one of the following:   `MODALITY_UNSPECIFIED`:	Unspecified modality.   `TEXT`:	Plain text.   `IMAGE`:	Image.   `VIDEO`:	Video.   `AUDIO`:	Audio.   `DOCUMENT`:	Document, e.g. PDF. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`MODALITY_UNSPECIFIED`</li><li>`TEXT`</li><li>`IMAGE`</li><li>`VIDEO`</li><li>`AUDIO`</li><li>`DOCUMENT`</li></ul></details> |
| Token Count | `token-count` | integer | Number of tokens. |

</div>

<h4 id="chat-tool-use-prompt-tokens-details">Tool Use Prompt Tokens Details</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Modality | `modality` | string | Content Part modality. Indicates the media type of a content part. The value is one of the following:   `MODALITY_UNSPECIFIED`:	Unspecified modality.   `TEXT`:	Plain text.   `IMAGE`:	Image.   `VIDEO`:	Video.   `AUDIO`:	Audio.   `DOCUMENT`:	Document, e.g. PDF. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`MODALITY_UNSPECIFIED`</li><li>`TEXT`</li><li>`IMAGE`</li><li>`VIDEO`</li><li>`AUDIO`</li><li>`DOCUMENT`</li></ul></details> |
| Token Count | `token-count` | integer | Number of tokens. |

</div>

<h4 id="chat-candidates">Candidates</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Average Logprobs | `avg-logprobs` | number | Average log probability score of the candidate. |
| [Citation Metadata](#chat-citation-metadata) | `citation-metadata` | object | Citation metadata for generated content, listing sources. |
| [Content](#chat-content) | `content` | object | Base structured datatype with producer role and ordered parts. |
| Finish Reason | `finish-reason` | string | Reason why the model stopped generating for a candidate. The value is one of the following:   `FINISH_REASON_UNSPECIFIED`:	Default value. This value is unused.   `STOP`:	Natural stop point of the model or provided stop sequence.   `MAX_TOKENS`:	The maximum number of tokens as specified in the request was reached.   `SAFETY`:	The response candidate content was flagged for safety reasons.   `RECITATION`:	The response candidate content was flagged for recitation reasons.   `LANGUAGE`:	The response candidate content was flagged for using an unsupported language.   `OTHER`:	Unknown reason.   `BLOCKLIST`:	Token generation stopped because the content contains forbidden terms.   `PROHIBITED_CONTENT`:	Token generation stopped for potentially containing prohibited content.   `SPII`:	Token generation stopped because the content potentially contains Sensitive Personally IDentifiable Information (SPII).   `MALFORMED_FUNCTION_CALL`:	The function call generated by the model is invalid.   `IMAGE_SAFETY`:	Token generation stopped because generated images contain safety violations.   `UNEXPECTED_TOOL_CALL`:	Model generated a tool call but no tools were enabled in the request.   `TOO_MANY_TOOL_CALLS`:	Model called too many tools consecutively, thus the system exited execution. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`FINISH_REASON_UNSPECIFIED`</li><li>`STOP`</li><li>`MAX_TOKENS`</li><li>`SAFETY`</li><li>`RECITATION`</li><li>`LANGUAGE`</li><li>`OTHER`</li><li>`BLOCKLIST`</li><li>`PROHIBITED_CONTENT`</li><li>`SPII`</li><li>`MALFORMED_FUNCTION_CALL`</li><li>`IMAGE_SAFETY`</li><li>`UNEXPECTED_TOOL_CALL`</li><li>`TOO_MANY_TOOL_CALLS`</li></ul></details> |
| [Grounding Attributions](#chat-grounding-attributions) | `grounding-attributions` | array | Attribution information for sources that contributed to a grounded answer. |
| [Grounding Metadata](#chat-grounding-metadata) | `grounding-metadata` | object | Metadata returned to client when grounding is enabled. |
| Index | `index` | integer | Position of the candidate in the returned list. |
| [Logprobs Result](#chat-logprobs-result) | `logprobs-result` | object | Log probabilities for generated tokens. |
| [Safety Ratings](#chat-safety-ratings) | `safety-ratings` | array | Safety ratings applied to this candidate. |
| Token Count | `token-count` | integer | Token count for this candidate. |
| [URL Context Metadata](#chat-url-context-metadata) | `url-context-metadata` | object | Metadata related to URL context retrieval tool. |

</div>

<h4 id="chat-content">Content</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Parts](#chat-parts) | `parts` | array | Parts of the content. |
| Role | `role` | string | The producer of the content. Must be either 'user' or 'model'. Useful to set for multi-turn conversations, otherwise can be left blank or unset. Optional. The value is one of the following:   `USER`: User content.   `MODEL`: Model content. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`USER`</li><li>`MODEL`</li></ul></details> |

</div>

<h4 id="chat-parts">Parts</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Thought | `thought` | boolean | Indicates if the part is a thought from the model. |
| Thought Signature | `thought-signature` | string | Opaque signature for the thought (base64-encoded bytes). |
| [Video Metadata](#chat-video-metadata) | `video-metadata` | object | Optional video metadata (only with blob or fileData video content). |

</div>

<h4 id="chat-video-metadata">Video Metadata</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| End Offset | `end-offset` | string | The end offset of the video (duration string, e.g. "3.5s"). |
| FPS | `fps` | number | Frame rate of the video sent to the model. Range (0.0, 24.0]. |
| Start Offset | `start-offset` | string | The start offset of the video (duration string, e.g. "3.5s"). |

</div>

<h4 id="chat-safety-ratings">Safety Ratings</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Blocked | `blocked` | boolean | Whether the content was blocked by this rating. |
| Harm Category | `category` | string | Harm category. |
| Probability | `probability` | string | Probability level of harm. |

</div>

<h4 id="chat-citation-metadata">Citation Metadata</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Citations](#chat-citations) | `citations` | array | Citations to sources for a specific response. |

</div>

<h4 id="chat-citations">Citations</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| End Index | `end-index` | integer | Optional. End of the attributed segment, exclusive. |
| License | `license` | string | Optional. License for the GitHub project that is attributed as a source for segment. License info is required for code citations. |
| Start Index | `start-index` | integer | Optional. Start of segment of the response that is attributed to this source. Index indicates the start of the segment, measured in bytes. |
| URI | `uri` | string | Optional. URI that is attributed as a source for a portion of the text. |

</div>

<h4 id="chat-grounding-attributions">Grounding Attributions</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Content](#chat-content) | `content` | object | Grounding source content that makes up this attribution. |
| [Source ID](#chat-source-id) | `source-id` | object | Identifier for the source contributing to this attribution. |

</div>

<h4 id="chat-content">Content</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Parts](#chat-parts) | `parts` | array | Parts of the content. |
| Role | `role` | string | The producer of the content. Must be either 'user' or 'model'. Useful to set for multi-turn conversations, otherwise can be left blank or unset. Optional. The value is one of the following:   `USER`: User content.   `MODEL`: Model content. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`USER`</li><li>`MODEL`</li></ul></details> |

</div>

<h4 id="chat-parts">Parts</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Thought | `thought` | boolean | Indicates if the part is a thought from the model. |
| Thought Signature | `thought-signature` | string | Opaque signature for the thought (base64-encoded bytes). |
| [Video Metadata](#chat-video-metadata) | `video-metadata` | object | Optional video metadata (only with blob or fileData video content). |

</div>

<h4 id="chat-video-metadata">Video Metadata</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| End Offset | `end-offset` | string | The end offset of the video (duration string, e.g. "3.5s"). |
| FPS | `fps` | number | Frame rate of the video sent to the model. Range (0.0, 24.0]. |
| Start Offset | `start-offset` | string | The start offset of the video (duration string, e.g. "3.5s"). |

</div>

<h4 id="chat-source-id">Source ID</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Grounding Passage ID](#chat-grounding-passage-id) | `grounding-passage` | object | Identifier for an inline passage. |
| [Semantic Retriever Chunk](#chat-semantic-retriever-chunk) | `semantic-retriever-chunk` | object | Identifier for a Chunk fetched via Semantic Retriever |

</div>

<h4 id="chat-grounding-passage-id">Grounding Passage ID</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Part Index | `part-index` | integer | Index of the part within the GroundingPassage.content |
| Passage ID | `passage-id` | string | ID of the passage matching the request's GroundingPassage.id |

</div>

<h4 id="chat-semantic-retriever-chunk">Semantic Retriever Chunk</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Chunk | `chunk` | string | Name of the Chunk containing the attributed text |
| Source | `source` | string | Name of the Semantic Retriever source (e.g. corpora/123) |

</div>

<h4 id="chat-logprobs-result">Logprobs Result</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Top Candidates](#chat-top-candidates) | `top-candidates` | array | Length = total number of decoding steps. |

</div>

<h4 id="chat-top-candidates">Top Candidates</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Log Probability | `logprob` | number | The candidate's log probability. |
| Token | `token` | string | The candidate's token string value. |
| Token ID | `token-id` | integer | The candidate's token id value. |

</div>

<h4 id="chat-url-context-metadata">URL Context Metadata</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [URL Metadata](#chat-url-metadata) | `url-metadata` | array | List of url context. |

</div>

<h4 id="chat-url-metadata">URL Metadata</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Retrieved URL | `retrieved-url` | string | Retrieved url by the tool. |
| URL Retrieval Status | `url-retrieval-status` | string | Retrieval status for URL-based context. The value is one of the following:   `URL_RETRIEVAL_STATUS_UNSPECIFIED`:	Default value. This value is unused.   `URL_RETRIEVAL_STATUS_SUCCESS`:	URL retrieval is successful.   `URL_RETRIEVAL_STATUS_ERROR`:	URL retrieval is failed due to error.   `URL_RETRIEVAL_STATUS_PAYWALL`:	URL retrieval is failed because the content is behind paywall.   `URL_RETRIEVAL_STATUS_UNSAFE`:	URL retrieval is failed because the content is unsafe. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`URL_RETRIEVAL_STATUS_UNSPECIFIED`</li><li>`URL_RETRIEVAL_STATUS_SUCCESS`</li><li>`URL_RETRIEVAL_STATUS_ERROR`</li><li>`URL_RETRIEVAL_STATUS_PAYWALL`</li><li>`URL_RETRIEVAL_STATUS_UNSAFE`</li></ul></details> |

</div>

<h4 id="chat-grounding-metadata">Grounding Metadata</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Grounding Chunks](#chat-grounding-chunks) | `grounding-chunks` | array | Supporting references retrieved from grounding source |
| [Grounding Supports](#chat-grounding-supports) | `grounding-supports` | array | List of grounding support |
| [Retrieval Metadata](#chat-retrieval-metadata) | `retrieval-metadata` | object | Retrieval metadata for grounding flow |
| [Search Entry Point](#chat-search-entry-point) | `search-entry-point` | object | Google search entry for follow-up web searches |
| Web Search Queries | `web-search-queries` | array | Web search queries for follow-up search |

</div>

<h4 id="chat-grounding-chunks">Grounding Chunks</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Web](#chat-web) | `web` | object | Web grounding chunk |

</div>

<h4 id="chat-web">Web</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Title | `title` | string | Title of the chunk |
| URI | `uri` | string | URI reference of the chunk |

</div>

<h4 id="chat-grounding-supports">Grounding Supports</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Confidence Scores | `confidence-scores` | array | Confidence scores aligned with groundingChunkIndices |
| Grounding Chunk Indices | `grounding-chunk-indices` | array | Indices into groundingChunks that support the claim |
| [Segment](#chat-segment) | `segment` | object | Segment of the content |

</div>

<h4 id="chat-segment">Segment</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| End Index | `end-index` | integer | End byte offset in the Part (exclusive) |
| Part Index | `part-index` | integer | Index of the Part in its parent Content |
| Start Index | `start-index` | integer | Start byte offset in the Part (inclusive) |
| Text | `text` | string | Text of the segment |

</div>

<h4 id="chat-search-entry-point">Search Entry Point</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Rendered Content | `rendered-content` | string | Web content snippet suitable for embedding |
| SDK Blob | `sdk-blob` | string | Base64-encoded JSON of `&lt;search term, search url&gt;` tuples |

</div>

<h4 id="chat-retrieval-metadata">Retrieval Metadata</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Google Search Dynamic Retrieval Score | `google-search-dynamic-retrieval-score` | number | Likelihood [0,1] that Google Search could help answer the prompt |

</div>

<h4 id="chat-prompt-feedback">Prompt Feedback</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Block Reason | `block-reason` | string | Specifies the reason why the prompt was blocked. The value is one of the following:   `BLOCK_REASON_UNSPECIFIED`: Default value. This value is unused.   `SAFETY`: Prompt was blocked due to safety reasons. Inspect safetyRatings to understand which safety category blocked it.   `OTHER`: Prompt was blocked due to unknown reasons.   `BLOCKLIST`: Prompt was blocked due to the terms which are included from the terminology blocklist.   `PROHIBITED_CONTENT`: Prompt was blocked due to prohibited content.   `IMAGE_SAFETY`: Candidates blocked due to unsafe image generation content. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`BLOCK_REASON_UNSPECIFIED`</li><li>`SAFETY`</li><li>`OTHER`</li><li>`BLOCKLIST`</li><li>`PROHIBITED_CONTENT`</li><li>`IMAGE_SAFETY`</li></ul></details> |
| [Safety Ratings](#chat-safety-ratings) | `safety-ratings` | array | Safety rating for a piece of content. The safety rating contains the category of harm and the  harm probability level in that category for a piece of content. Content is classified for safety  across a number of harm categories and the probability of the harm classification is included here. |

</div>

<h4 id="chat-safety-ratings">Safety Ratings</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Blocked | `blocked` | boolean | Whether the content was blocked by this rating. |
| Harm Category | `category` | string | Harm category. |
| Probability | `probability` | string | Probability level of harm. |

</div>
</details>


### Cache

Context caching allows you to cache input tokens and reference them in subsequent requests, reducing costs and improving performance  for repetitive large contexts. This task supports creating, listing, getting, updating, and deleting cached content with proper time-to-live (TTL) management. The minimum input token count for context caching is 1,024 for 2.5 Flash and 4,096 for 2.5 Pro models.

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Input | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Task ID (required) | `task` | string | `TASK_CACHE` |
| Operation (required) | `operation` | string | The cache operation to perform. The value is one of the following:   `create`: Create a new cached content.   `list`: List all cached contents.   `get`: Retrieve a specific cached content.   `update`: Update an existing cached content (only expiration time can be updated).   `delete`: Delete a cached content. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`create`</li><li>`list`</li><li>`get`</li><li>`update`</li><li>`delete`</li></ul></details> |
| Model (required) | `model` | string | ID of the model to use for caching. Required for create operations. The model is immutable after creation. The value is one of the following:   `gemini-2.5-pro`: Optimized for enhanced thinking and reasoning, multimodal understanding, advanced coding, and more.   `gemini-2.5-flash`: Optimized for Adaptive thinking, cost efficiency.   `gemini-2.0-flash-lite`: Optimized for Most cost-efficient model supporting high throughput. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`gemini-2.5-pro`</li><li>`gemini-2.5-flash`</li><li>`gemini-2.0-flash-lite`</li></ul></details> |
| Cache Name | `cache-name` | string | [**GET**, **UPDATE**, **DELETE**] The name of the cached content for get, update, or delete operations.  Format: cachedContents/\{cachedContent\}. Required for get, update, and delete operations. |
| Prompt | `prompt` | string | [**CREATE**] The main text instruction or query to be cached for create operations. |
| Images | `images` | array[string] | [**CREATE**] URI references or base64 content of input images to be cached for create operations. |
| Audio | `audio` | array[string] | [**CREATE**] URI references or base64 content of input audio to be cached for create operations. |
| Videos | `videos` | array[string] | [**CREATE**] URI references or base64 content of input videos to be cached for create operations. |
| Documents | `documents` | array[string] | [**CREATE**] URI references or base64 content of input documents to be cached for create operations. Different vendors might have different constraints on the document format. For example, Gemini supports only PDF. |
| System Message | `system-message` | string | [**CREATE**] A system message to guide model behavior for create operations. Takes precedence over system-instruction. |
| Display Name | `display-name` | string | [**CREATE**] Optional. The user-provided name of the cached content for create operations. |
| [System Instruction](#cache-system-instruction) | `system-instruction` | object | [**CREATE**] Optional. A system instruction to guide the model behavior for create operations. |
| [Contents](#cache-contents) | `contents` | array[object] | The input contents to cache for create operations. Each item represents a user or model turn composed of parts (text or images). This is the main content that will be cached for reuse in subsequent requests. |
| [Tools](#cache-tools) | `tools` | array[object] | [**CREATE**] Optional. Tools available to the model for create operations, e.g., function declarations. |
| [Tool Config](#cache-tool-config) | `tool-config` | object | Configuration for tool usage and function calling. |
| TTL | `ttl` | string | [**CREATE**, **UPDATE**] Time to live duration for the cached content in Google Duration format. A duration in seconds with up to nine fractional digits, ending with 's'. Example: "3.5s". Must be at least 60 seconds. Maximum is 7 days (604800 seconds). |
| Expire Time | `expire-time` | string | [**CREATE**, **UPDATE**] Absolute expiration time for the cached content in RFC3339 format. Uses RFC 3339, where generated output will always be Z-normalized and use 0, 3, 6 or 9 fractional digits. Examples: "2014-10-02T15:01:23Z", "2014-10-02T15:01:23.045123456Z" or "2014-10-02T15:01:23+05:30". |
| Page Size | `page-size` | integer | [**LIST**] Optional. The maximum number of cached contents to return for list operations. Default is 50. |
| Page Token | `page-token` | string | [**LIST**] Optional. A page token from a previous list operation for pagination. |

</div>
<details>
<summary> Input Objects in Cache</summary>

<h4 id="cache-system-instruction">System Instruction</h4>

[**CREATE**] Optional. A system instruction to guide the model behavior for create operations.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Parts](#cache-parts) | `parts` | array | Parts of the content. |
| Role | `role` | string | The producer of the content. Must be either 'user' or 'model'. Useful to set for multi-turn conversations, otherwise can be left blank or unset. Optional. The value is one of the following:   `USER`: User content.   `MODEL`: Model content. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`USER`</li><li>`MODEL`</li></ul></details> |
</div>
<h4 id="cache-parts">Parts</h4>

Parts of the content.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Thought | `thought` | boolean | Indicates if the part is a thought from the model. |
| Thought Signature | `thought-signature` | string | Opaque signature for the thought (base64-encoded bytes). |
| [Video Metadata](#cache-video-metadata) | `video-metadata` | object | Optional video metadata (only with blob or fileData video content). |
</div>
<h4 id="cache-video-metadata">Video Metadata</h4>

Optional video metadata (only with blob or fileData video content).


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| End Offset | `end-offset` | string | The end offset of the video (duration string, e.g. "3.5s"). |
| FPS | `fps` | number | Frame rate of the video sent to the model. Range (0.0, 24.0]. |
| Start Offset | `start-offset` | string | The start offset of the video (duration string, e.g. "3.5s"). |
</div>
<h4 id="cache-contents">Contents</h4>

The input contents to cache for create operations. Each item represents a user or model turn composed of parts (text or images). This is the main content that will be cached for reuse in subsequent requests.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Parts](#cache-parts) | `parts` | array | Parts of the content. |
| Role | `role` | string | The producer of the content. Must be either 'user' or 'model'. Useful to set for multi-turn conversations, otherwise can be left blank or unset. Optional. The value is one of the following:   `USER`: User content.   `MODEL`: Model content. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`USER`</li><li>`MODEL`</li></ul></details> |
</div>
<h4 id="cache-parts">Parts</h4>

Parts of the content.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Thought | `thought` | boolean | Indicates if the part is a thought from the model. |
| Thought Signature | `thought-signature` | string | Opaque signature for the thought (base64-encoded bytes). |
| [Video Metadata](#cache-video-metadata) | `video-metadata` | object | Optional video metadata (only with blob or fileData video content). |
</div>
<h4 id="cache-video-metadata">Video Metadata</h4>

Optional video metadata (only with blob or fileData video content).


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| End Offset | `end-offset` | string | The end offset of the video (duration string, e.g. "3.5s"). |
| FPS | `fps` | number | Frame rate of the video sent to the model. Range (0.0, 24.0]. |
| Start Offset | `start-offset` | string | The start offset of the video (duration string, e.g. "3.5s"). |
</div>
<h4 id="cache-tools">Tools</h4>

[**CREATE**] Optional. Tools available to the model for create operations, e.g., function declarations.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Code Execution | `code-execution` | object | Tool that executes code generated by the model, and automatically returns the result to the model. |
| [Function Declarations](#cache-function-declarations) | `function-declarations` | array | Functions the model may call. |
| [Google Search](#cache-google-search) | `google-search` | object | GoogleSearch tool type. Tool to support Google Search in Model. Powered by Google. |
| [Google Search Retrieval](#cache-google-search-retrieval) | `google-search-retrieval` | object | Tool to retrieve public web data for grounding, powered by Google. |
| URL Context | `url-context` | object | Tool to support URL context retrieval. |
</div>
<h4 id="cache-function-declarations">Function Declarations</h4>

Functions the model may call.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Description | `description` | string | A brief description of the function. |
| Name | `name` | string | The name of the function to call. |
| [Parameters](#cache-parameters) | `parameters` | object | Describes the parameters to this function. Reflects the Open API 3.03 Parameter Object string Key: the name of the parameter.  Parameter names are case sensitive. Schema Value: the Schema defining the type used for the parameter. |
</div>
<h4 id="cache-parameters">Parameters</h4>

Describes the parameters to this function. Reflects the Open API 3.03 Parameter Object string Key: the name of the parameter.  Parameter names are case sensitive. Schema Value: the Schema defining the type used for the parameter.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Any Of](#cache-any-of) | `anyOf` | array | Value must satisfy any of the sub-schemas. |
| Default | `default` | object | Default value for the field (ignored for validation). |
| Description | `description` | string | Optional description of the schema. |
| Enum | `enum` | array | Enum values for STRING with enum format. |
| Format | `format` | string | Optional format of the data. |
| Items | `items` | object | Schema of elements for ARRAY type. |
| Max Items | `max-items` | integer | Maximum number of elements for ARRAY type. |
| Max Length | `max-length` | integer | Maximum length for STRING type. |
| Max Properties | `max-properties` | integer | Maximum number of properties for OBJECT type. |
| Maximum | `maximum` | number | Maximum value for INTEGER/NUMBER types. |
| Min Items | `min-items` | integer | Minimum number of elements for ARRAY type. |
| Min Length | `min-length` | integer | Minimum length for STRING type. |
| Min Properties | `min-properties` | integer | Minimum number of properties for OBJECT type. |
| Minimum | `minimum` | number | Minimum value for INTEGER/NUMBER types. |
| Nullable | `nullable` | boolean | Indicates if the value may be null. |
| Pattern | `pattern` | string | Regex pattern constraint for STRING type. |
| Properties | `properties` | object | Properties for OBJECT type. |
| Property Ordering | `property-ordering` | array | Order of properties for OBJECT type (non-standard). |
| Required | `required` | array | Required properties for OBJECT type. |
| Title | `title` | string | Optional title of the schema. |
| Type | `type` | string | Required data type of the schema. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`TYPE_UNSPECIFIED`</li><li>`STRING`</li><li>`NUMBER`</li><li>`INTEGER`</li><li>`BOOLEAN`</li><li>`ARRAY`</li><li>`OBJECT`</li></ul></details> |
</div>
<h4 id="cache-google-search-retrieval">Google Search Retrieval</h4>

Tool to retrieve public web data for grounding, powered by Google.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Dynamic Retrieval Config](#cache-dynamic-retrieval-config) | `dynamic-retrieval-config` | object | Specifies the dynamic retrieval configuration for the given source. |
</div>
<h4 id="cache-dynamic-retrieval-config">Dynamic Retrieval Config</h4>

Specifies the dynamic retrieval configuration for the given source.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Dynamic Threshold | `dynamic-threshold` | number | The threshold to be used in dynamic retrieval. If not set, a system default value is used. |
| Mode | `mode` | string | The mode of the predictor to be used in dynamic retrieval. The value is one of the following:   `MODE_UNSPECIFIED`: Always trigger retrieval.   `MODE_DYNAMIC`: Run retrieval only when system decides it is necessary. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`MODE_UNSPECIFIED`</li><li>`MODE_DYNAMIC`</li></ul></details> |
</div>
<h4 id="cache-google-search">Google Search</h4>

GoogleSearch tool type. Tool to support Google Search in Model. Powered by Google.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Time Range Filter](#cache-time-range-filter) | `time-range-filter` | object | Filter search results to a specific time range. If customers set a start time, they must set an end time (and vice versa). |
</div>
<h4 id="cache-time-range-filter">Time Range Filter</h4>

Filter search results to a specific time range. If customers set a start time, they must set an end time (and vice versa).


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| End Time | `end-time` | string | Exclusive end of the interval. If specified, a Timestamp matching this interval will have to be before the end. Uses RFC 3339, where generated output will always be Z-normalized and use 0, 3, 6 or 9 fractional digits. Offsets other than "Z" are also accepted. Examples: "2014-10-02T15:01:23Z", "2014-10-02T15:01:23.045123456Z" or "2014-10-02T15:01:23+05:30". |
| Start Time | `start-time` | string | Inclusive start of the interval. If specified, a Timestamp matching this interval will have to be the same or after the start. Uses RFC 3339, where generated output will always be Z-normalized and use 0, 3, 6 or 9 fractional digits. Offsets other than "Z" are also accepted. Examples: "2014-10-02T15:01:23Z", "2014-10-02T15:01:23.045123456Z" or "2014-10-02T15:01:23+05:30". |
</div>
<h4 id="cache-tool-config">Tool Config</h4>

Configuration for tool usage and function calling.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| [Function Calling Config](#cache-function-calling-config) | `function-calling-config` | object | Configuration for specifying function calling behavior. |
</div>
<h4 id="cache-function-calling-config">Function Calling Config</h4>

Configuration for specifying function calling behavior.


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Allowed Function Names | `allowed-function-names` | array | A set of function names that, when provided, limits the functions the model will call. This should only be set when the Mode is ANY or VALIDATED. Function names should match  `[FunctionDeclaration.name]`. When set, model will predict a function call from only allowed function names. |
| Mode | `mode` | string | Specifies the mode in which function calling should execute. If unspecified, the default value will be set to `AUTO`. The value is one of the following:   `MODE_UNSPECIFIED`: Unspecified function calling mode. This value should not be used.   `AUTO`: Default model behavior, model decides to predict either a function call or a natural language response.   `ANY`: Model is constrained to always predicting a function call only. If "allowedFunctionNames" are set, the predicted function call will be limited to any one of "allowedFunctionNames", else the predicted function call will be any one of the provided "functionDeclarations".   `NONE`: Model will not predict any function call. Model behavior is same as when not passing any function declarations.   `VALIDATED`: Model decides to predict either a function call or a natural language response, but will validate function calls with constrained decoding. If "allowedFunctionNames" are set, the predicted function call will be limited to any one of "allowedFunctionNames", else the predicted function call will be any one of the provided "functionDeclarations". <br/><details><summary><strong>Enum values</strong></summary><ul><li>`MODE_UNSPECIFIED`</li><li>`AUTO`</li><li>`ANY`</li><li>`NONE`</li></ul></details> |
</div>
</details>
<details>
<summary>The <code>parts</code> Object </summary>

<h4 id="cache-parts">Parts</h4>

`parts` must fulfill one of the following schemas:




<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Text | `text` | string | Inline text content. |
</div>




<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Blob | `blob` | object | Raw media bytes. Text should use the 'text' field instead. |
</div>




<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Function Call | `function-call` | object | Predicted function call with name and arguments. |
</div>




<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Function Response | `function-response` | object | Result of a function call with name and structured response. |
</div>




<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| File Data | `file-data` | object | URI-based data reference with MIME type. |
</div>




<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Executable Code | `executable-code` | object | Code generated by the model that is meant to be executed. |
</div>




<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Code Execution Result | `code-execution-result` | object | Result of executing the ExecutableCode. |
</div>
</details>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Output | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Operation (optional) | `operation` | string | The cache operation that was performed. |
| [Cached Content](#cache-cached-content) (optional) | `cached-content` | object | [**CREATE**, **GET**, **UPDATE**] The cached content object for create, get, and update operations.  Not returned for delete operations. |
| [Cached Contents](#cache-cached-contents) (optional) | `cached-contents` | array[object] | [**LIST**] List of cached contents for list operations. |
| Next Page Token (optional) | `next-page-token` | string | [**LIST**] Token for retrieving the next page of results for list operations. |

</div>


<details>
<summary> Output Objects in Cache</summary>

<h4 id="cache-cached-content">Cached Content</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Create Time | `create-time` | string | Creation time of the cached content in RFC3339 format. |
| Display Name | `display-name` | string | Optional. The user-provided name of the cached content. |
| Expire Time | `expire-time` | string | Expiration time of the cached content in RFC3339 format. |
| Model | `model` | string | The name of the Model to use for cached content. |
| Name | `name` | string | The resource name referring to the cached content. Format: cachedContents/\{cachedContent\} |
| Update Time | `update-time` | string | Last update time of the cached content in RFC3339 format. |
| [Usage Metadata](#cache-usage-metadata) | `usage-metadata` | object | Token usage statistics for the cached content. |

</div>

<h4 id="cache-usage-metadata">Usage Metadata</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Audio Duration Seconds | `audio-duration-seconds` | integer | Duration of audio in seconds. |
| Image Count | `image-count` | integer | Number of images. |
| Text Count | `text-count` | integer | Number of text characters. |
| Total Token Count | `total-token-count` | integer | Total number of tokens that the cached content consumes. |
| Video Duration Seconds | `video-duration-seconds` | integer | Duration of video in seconds. |

</div>

<h4 id="cache-cached-contents">Cached Contents</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Create Time | `create-time` | string | Creation time of the cached content in RFC3339 format. |
| Display Name | `display-name` | string | Optional. The user-provided name of the cached content. |
| Expire Time | `expire-time` | string | Expiration time of the cached content in RFC3339 format. |
| Model | `model` | string | The name of the Model to use for cached content. |
| Name | `name` | string | The resource name referring to the cached content. Format: cachedContents/\{cachedContent\} |
| Update Time | `update-time` | string | Last update time of the cached content in RFC3339 format. |
| [Usage Metadata](#cache-usage-metadata) | `usage-metadata` | object | Token usage statistics for the cached content. |

</div>

<h4 id="cache-usage-metadata">Usage Metadata</h4>

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Audio Duration Seconds | `audio-duration-seconds` | integer | Duration of audio in seconds. |
| Image Count | `image-count` | integer | Number of images. |
| Text Count | `text-count` | integer | Number of text characters. |
| Total Token Count | `total-token-count` | integer | Total number of tokens that the cached content consumes. |
| Video Duration Seconds | `video-duration-seconds` | integer | Duration of video in seconds. |

</div>
</details>


### Text Embeddings

Turn text into numbers, unlocking use cases like search.

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Input | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Task ID (required) | `task` | string | `TASK_TEXT_EMBEDDINGS` |
| Model (required) | `model` | string | The Gemini embedding model, gemini-embedding-001, is trained using the Matryoshka Representation Learning (MRL)  technique which teaches a model to learn high-dimensional embeddings that have initial segments (or prefixes)  which are also useful, simpler versions of the same data. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`gemini-embedding-001`</li></ul></details> |
| Text (required) | `text` | string | The text to generate embeddings for. |
| Task Type (required) | `task-type` | string | The type of task to perform for optimal embedding generation. The value is one of the following:   `SEMANTIC_SIMILARITY`: (Default) Embeddings optimized to assess text similarity. Examples: Recommendation systems, duplicate detection.   `CLASSIFICATION`: Embeddings optimized to classify texts according to preset labels. Examples: Sentiment analysis, spam detection.   `CLUSTERING`: Embeddings optimized to group similar texts together. Examples: Document organization, market research, anomaly detection.   `RETRIEVAL_DOCUMENT`: Embeddings optimized for document search. Examples: Indexing articles, books, or web pages for search.   `RETRIEVAL_QUERY`: Embeddings optimized for general search queries. Use `RETRIEVAL_QUERY` for queries; `RETRIEVAL_DOCUMENT` for documents to be retrieved. Examples: General search queries for custom search applications.   `CODE_RETRIEVAL_QUERY`: Embeddings optimized for retrieval of code blocks based on natural language queries. Use `CODE_RETRIEVAL_QUERY` for queries; `RETRIEVAL_DOCUMENT` for code blocks to be retrieved. Examples: Natural language queries about code for code suggestions and search.   `QUESTION_ANSWERING`: Embeddings for questions in a question-answering system, optimized for finding documents that answer the question. Use `QUESTION_ANSWERING` for questions; `RETRIEVAL_DOCUMENT` for documents to be retrieved. Examples: Questions in Q&A systems, chatbots, knowledge bases.   `FACT_VERIFICATION`: Embeddings for statements that need to be verified, optimized for retrieving documents that contain evidence supporting or refuting the statement. Use `FACT_VERIFICATION` for the target text; `RETRIEVAL_DOCUMENT` for documents to be retrieved. Examples: Statements that need verification for automated fact-checking systems. <br/><details><summary><strong>Enum values</strong></summary><ul><li>`SEMANTIC_SIMILARITY`</li><li>`CLASSIFICATION`</li><li>`CLUSTERING`</li><li>`RETRIEVAL_DOCUMENT`</li><li>`RETRIEVAL_QUERY`</li><li>`CODE_RETRIEVAL_QUERY`</li><li>`QUESTION_ANSWERING`</li><li>`FACT_VERIFICATION`</li></ul></details> |
| Title | `title` | string | Title for the text. Only applicable when TaskType is `RETRIEVAL_DOCUMENT`. |
| Output Dimensionality | `output-dimensionality` | integer | Use this parameter to control the size of the output embedding vector. Selecting a smaller  output dimensionality can save storage space and increase computational efficiency for  downstream applications, while sacrificing little in terms of quality. By default, it  outputs a 3072-dimensional embedding, but you can truncate it to a smaller size without  losing quality to save storage space. We recommend using 768, 1536, or 3072 output dimensions. |

</div>


<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Output | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Embedding | `embedding` | array[number] | The embedding of the text. |

</div>
## Example Recipes

### Chat with multimodality inputs

```yaml
version: v1beta
component:
  gemini:
    type: gemini
    task: TASK_CHAT
    input:
      model: gemini-2.5-pro
      stream: ${variable.stream}
      prompt: ${variable.prompt}
      images:
        - ${variable.image:base64}
      documents:
        - ${variable.document:base64}
      system-message: You are a helpful assistant.
      temperature: 1
      top-p: 1
    setup: ${connection.gemini}
variable:
  prompt:
    title: Prompt
    description: Prompt to instruct the model
    type: string
  document:
    title: Document
    description: Document to convert to Markdown
    type: document
  image:
    title: image
    description: Image to take a look
    type: image
  stream:
    title: Enable Stream
    description: whether to enable streaming
    type: boolean
output:
  texts:
    title: texts[0]
    value: ${gemini.output.texts[0]}
  usage:
    title: usage
    value: ${gemini.output.usage}
  candidates:
    title: candidates
    value: ${gemini.output.candidates}
  usage-metadata:
    title: usage-metadata
    value: ${gemini.output.usage-metadata}
  prompt-feedback:
    title: prompt-feedback
    value: ${gemini.output.prompt-feedback}
  model-version:
    title: model-version
    value: ${gemini.output.model-version}
  response-id:
    title: response-id
    value: ${gemini.output.response-id}
```

### Cache a document

```yaml
version: v1beta
component:
  gemini:
    type: gemini
    task: TASK_CACHE
    input:
      model: gemini-2.5-flash
      operation: create
      ttl: 60s
      documents:
        - ${variable.document}
      system-message: You are a helpful assistant.
variable:
  document:
    title: Document
    description: Document to convert to Markdown
    type: document
  stream:
    title: Enable Stream
    description: whether to enable streaming
    type: boolean
output:
  cached-content:
    title: cached content
    value: ${gemini.output.cached-content}
```

### Embed a text input

```yaml
version: v1beta
component:
  gemini:
    type: gemini
    task: TASK_TEXT_EMBEDDINGS
    input:
      model: gemini-embedding-001
      text: ${variable.text}
variable:
  text:
    title: Text
    description: Text to embed
    type: string
output:
  embedding:
    title: Embedding result
    value: ${gemini.output.embedding}
```
