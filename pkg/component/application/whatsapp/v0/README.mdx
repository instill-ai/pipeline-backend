---
title: "WhatsApp"
lang: "en-US"
draft: false
description: "Learn about how to set up a WhatsApp component https://github.com/instill-ai/instill-core"
---

The WhatsApp component is an application component that allows users to use WhatsApp Business Platform API to send template and messages.
It can carry out the following tasks:
- [Send Text Based Template Message](#send-text-based-template-message)
- [Send Media Based Template Message](#send-media-based-template-message)
- [Send Location Based Template Message](#send-location-based-template-message)
- [Send Authentication Template Message](#send-authentication-template-message)
- [Send Text Message](#send-text-message)
- [Send Media Message](#send-media-message)
- [Send Location Message](#send-location-message)
- [Send Contact Message](#send-contact-message)
- [Send Interactive Call to Action URL Button Message](#send-interactive-call-to-action-url-button-message)



## Release Stage

`Alpha`



## Configuration

The component definition and tasks are defined in the [definition.yaml](https://github.com/instill-ai/pipeline-backend/blob/main/pkg/component/application/whatsapp/v0/config/definition.yaml) and [tasks.yaml](https://github.com/instill-ai/pipeline-backend/blob/main/pkg/component/application/whatsapp/v0/config/tasks.yaml) files respectively.




## Setup


In order to communicate with WhatsApp, the following connection details need to be
provided. You may specify them directly in a pipeline recipe as key-value pairs
within the component's `setup` block, or you can create a **Connection** from
the [**Integration Settings**](https://docs.instill-ai.com/docs/set-up-component)
page and reference the whole `setup` as `setup:
${connection.<my-connection-id>}`.

<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Note |
| :--- | :--- | :--- | :--- |
| Token (required) | `token` | string | Fill in your WhatsApp access token. Go [here](https://developers.facebook.com/docs/whatsapp/cloud-api/get-started) for more information. |

</div>





## Supported Tasks

### Send Text Based Template Message

Send text-based template message. This task support header(text), body and button parameters.

<h4 id="send-text-based-template-message-input">Input</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Task ID (required) | `task` | string | `TASK_SEND_TEXT_BASED_TEMPLATE_MESSAGE` |
| Phone Number ID (required) | `phone-number-id` | object ([def-input/phone-number-id](#send-text-based-template-message-def-input-phone-number-id)) | Phone Number ID. Obtainable through the app dashboard. Note: This is for sender. |
| Recipient Phone Number (required) | `to` | object ([def-input/to](#send-text-based-template-message-def-input-to)) | The number of the recipient you are sending the message to. |
| Template Name (required) | `name` | object ([def-input/template/name](#send-text-based-template-message-def-input-template-name)) | Name of the template. |
| Language Code (required) | `language-code` | object ([def-input/template/language-code](#send-text-based-template-message-def-input-template-language-code)) | The code of the language in which the template is used. [Supported languages](https://developers.facebook.com/docs/whatsapp/api/messages/message-templates#supported-languages). |
| Header Parameters | `header-parameters` | array[string] | Specify the parameters for the header section of the template. Leave this blank if there is no parameter. |
| Body Parameters | `body-parameters` | object ([def-input/template/body-parameters](#send-text-based-template-message-def-input-template-body-parameters)) | Specify the parameters for the body section of the template. Leave this blank if there is no parameter. |
| Button Parameters | `button-parameters` | object ([def-input/template/button-parameters](#send-text-based-template-message-def-input-template-button-parameters)) | Specify the parameters for button(s). Leave this blank if there is no parameter. Follow this format or it won't work: button_index;button_type;value_of_the_parameter. The separator is a semicolon. button_index starts at 0. Example: 0;quick_reply;randomvalue. Note: This button parameter only support three types `quick_reply`, `url` and `copy_code`." |
</div>

<h4 id="send-text-based-template-message-output">Output</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Recipient WhatsApp ID | `recipient-wa-id` | object ([def-output/recipient-wa-id](#send-text-based-template-message-def-output-recipient-wa-id)) | The WhatsApp ID of the recipient. Most likely the same with their phone number. |
| Message ID | `message-id` | object ([def-output/message-id](#send-text-based-template-message-def-output-message-id)) | The ID of the message. |
| Message Status | `message-status` | object ([def-output/message-status](#send-text-based-template-message-def-output-message-status)) | The status of the message. |
</div>


### Send Media Based Template Message

Send media-based template message. This task support header(image, document & video), body and button parameters.

<h4 id="send-media-based-template-message-input">Input</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Task ID (required) | `task` | string | `TASK_SEND_MEDIA_BASED_TEMPLATE_MESSAGE` |
| Phone Number ID (required) | `phone-number-id` | object ([def-input/phone-number-id](#send-media-based-template-message-def-input-phone-number-id)) | Phone Number ID. Obtainable through the app dashboard. Note: This is for sender. |
| Recipient Phone Number (required) | `to` | object ([def-input/to](#send-media-based-template-message-def-input-to)) | The number of the recipient you are sending the message to. |
| Template Name (required) | `name` | object ([def-input/template/name](#send-media-based-template-message-def-input-template-name)) | Name of the template. |
| Language Code (required) | `language-code` | object ([def-input/template/language-code](#send-media-based-template-message-def-input-template-language-code)) | The code of the language in which the template is used. [Supported languages](https://developers.facebook.com/docs/whatsapp/api/messages/message-templates#supported-languages). |
| Header Type (required) | `media-type` | string<br/><small><small><details><summary>Enum values</summary><ul><li>`image`</li><li>`video`</li><li>`document`</li></ul></details></small></small> | Specify the header(media) type for the header section of the template. |
| ID or Link (Header Parameter) (required) | `id-or-link` | object ([def-input/media/id-or-link](#send-media-based-template-message-def-input-media-id-or-link)) | Input either ID or link of the media. If the input has `http`, it will be considered as a link. |
| Filename (Header Parameter) | `filename` | object ([def-input/media/filename](#send-media-based-template-message-def-input-media-filename)) | The filename of the document. Only document can use this property. This property will specify what format the document is displayed as in WhatsApp. If other media type tried to use this property, it will be ignored. |
| Body Parameters | `body-parameters` | object ([def-input/template/body-parameters](#send-media-based-template-message-def-input-template-body-parameters)) | Specify the parameters for the body section of the template. Leave this blank if there is no parameter. |
| Button Parameters | `button-parameters` | object ([def-input/template/button-parameters](#send-media-based-template-message-def-input-template-button-parameters)) | Specify the parameters for button(s). Leave this blank if there is no parameter. Follow this format or it won't work: button_index;button_type;value_of_the_parameter. The separator is a semicolon. button_index starts at 0. Example: 0;quick_reply;randomvalue. Note: This button parameter only support three types `quick_reply`, `url` and `copy_code`." |
</div>

<h4 id="send-media-based-template-message-output">Output</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Recipient WhatsApp ID | `recipient-wa-id` | object ([def-output/recipient-wa-id](#send-media-based-template-message-def-output-recipient-wa-id)) | The WhatsApp ID of the recipient. Most likely the same with their phone number. |
| Message ID | `message-id` | object ([def-output/message-id](#send-media-based-template-message-def-output-message-id)) | The ID of the message. |
| Message Status | `message-status` | object ([def-output/message-status](#send-media-based-template-message-def-output-message-status)) | The status of the message. |
</div>


### Send Location Based Template Message

Send location-based template message. This task support header(location), body and button parameters.

<h4 id="send-location-based-template-message-input">Input</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Task ID (required) | `task` | string | `TASK_SEND_LOCATION_BASED_TEMPLATE_MESSAGE` |
| Phone Number ID (required) | `phone-number-id` | object ([def-input/phone-number-id](#send-location-based-template-message-def-input-phone-number-id)) | Phone Number ID. Obtainable through the app dashboard. Note: This is for sender. |
| Recipient Phone Number (required) | `to` | object ([def-input/to](#send-location-based-template-message-def-input-to)) | The number of the recipient you are sending the message to. |
| Template Name (required) | `name` | object ([def-input/template/name](#send-location-based-template-message-def-input-template-name)) | Name of the template. |
| Language Code (required) | `language-code` | object ([def-input/template/language-code](#send-location-based-template-message-def-input-template-language-code)) | The code of the language in which the template is used. [Supported languages](https://developers.facebook.com/docs/whatsapp/api/messages/message-templates#supported-languages). |
| Latitude (Header Parameter) (required) | `latitude` | object ([def-input/location/latitude](#send-location-based-template-message-def-input-location-latitude)) | Location latitude. |
| Longitude (Header Parameter) (required) | `longitude` | object ([def-input/location/longitude](#send-location-based-template-message-def-input-location-longitude)) | Location longitude. |
| Location Name (Header Parameter) (required) | `location-name` | object ([def-input/location/location-name](#send-location-based-template-message-def-input-location-location-name)) | Name of the location. |
| Location Address (Header Parameter) (required) | `address` | object ([def-input/location/address](#send-location-based-template-message-def-input-location-address)) | Address of the location. |
| Body Parameters | `body-parameters` | object ([def-input/template/body-parameters](#send-location-based-template-message-def-input-template-body-parameters)) | Specify the parameters for the body section of the template. Leave this blank if there is no parameter. |
| Button Parameters | `button-parameters` | object ([def-input/template/button-parameters](#send-location-based-template-message-def-input-template-button-parameters)) | Specify the parameters for button(s). Leave this blank if there is no parameter. Follow this format or it won't work: button_index;button_type;value_of_the_parameter. The separator is a semicolon. button_index starts at 0. Example: 0;quick_reply;randomvalue. Note: This button parameter only support three types `quick_reply`, `url` and `copy_code`." |
</div>

<h4 id="send-location-based-template-message-output">Output</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Recipient WhatsApp ID | `recipient-wa-id` | object ([def-output/recipient-wa-id](#send-location-based-template-message-def-output-recipient-wa-id)) | The WhatsApp ID of the recipient. Most likely the same with their phone number. |
| Message ID | `message-id` | object ([def-output/message-id](#send-location-based-template-message-def-output-message-id)) | The ID of the message. |
| Message Status | `message-status` | object ([def-output/message-status](#send-location-based-template-message-def-output-message-status)) | The status of the message. |
</div>


### Send Authentication Template Message

Send authentication template message with one-time password button (The button is used to copy the password to clipboard). Authentication template has no header parameters.

<h4 id="send-authentication-template-message-input">Input</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Task ID (required) | `task` | string | `TASK_SEND_AUTHENTICATION_TEMPLATE_MESSAGE` |
| Phone Number ID (required) | `phone-number-id` | object ([def-input/phone-number-id](#send-authentication-template-message-def-input-phone-number-id)) | Phone Number ID. Obtainable through the app dashboard. Note: This is for sender. |
| Recipient Phone Number (required) | `to` | object ([def-input/to](#send-authentication-template-message-def-input-to)) | The number of the recipient you are sending the message to. |
| Template Name (required) | `name` | object ([def-input/template/name](#send-authentication-template-message-def-input-template-name)) | Name of the template. |
| Language Code (required) | `language-code` | object ([def-input/template/language-code](#send-authentication-template-message-def-input-template-language-code)) | The code of the language in which the template is used. [Supported languages](https://developers.facebook.com/docs/whatsapp/api/messages/message-templates#supported-languages). |
| One-Time Password (required) | `one-time-password` | string | One-time password to be sent to the recipient. Maximum 15 characters. |
</div>

<h4 id="send-authentication-template-message-output">Output</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Recipient WhatsApp ID | `recipient-wa-id` | object ([def-output/recipient-wa-id](#send-authentication-template-message-def-output-recipient-wa-id)) | The WhatsApp ID of the recipient. Most likely the same with their phone number. |
| Message ID | `message-id` | object ([def-output/message-id](#send-authentication-template-message-def-output-message-id)) | The ID of the message. |
| Message Status | `message-status` | object ([def-output/message-status](#send-authentication-template-message-def-output-message-status)) | The status of the message. |
</div>


### Send Text Message

Send text message. Note: Message can only be sent when the 24-hour customer service window is open. For more information, please visit [here](https://developers.facebook.com/docs/whatsapp/cloud-api/guides/send-messages#customer-service-windows)

<h4 id="send-text-message-input">Input</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Task ID (required) | `task` | string | `TASK_SEND_TEXT_MESSAGE` |
| Phone Number ID (required) | `phone-number-id` | object ([def-input/phone-number-id](#send-text-message-def-input-phone-number-id)) | Phone Number ID. Obtainable through the app dashboard. Note: This is for sender. |
| Recipient Phone Number (required) | `to` | object ([def-input/to](#send-text-message-def-input-to)) | The number of the recipient you are sending the message to. |
| Text (required) | `body` | string | Body of the message. |
| Preview URL (required) | `preview-url` | string<br/><small><small><details><summary>Enum values</summary><ul><li>`false`</li><li>`true`</li></ul></details></small></small> | Specify whether URL should be previewed or not. This will have no affect if the message does not contain any URL. |
</div>

<h4 id="send-text-message-output">Output</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Recipient WhatsApp ID | `recipient-wa-id` | object ([def-output/recipient-wa-id](#send-text-message-def-output-recipient-wa-id)) | The WhatsApp ID of the recipient. Most likely the same with their phone number. |
| Message ID | `message-id` | object ([def-output/message-id](#send-text-message-def-output-message-id)) | The ID of the message. |
</div>


### Send Media Message

Send media message. Media supported: video, audio, document, image. Note: Message can only be sent when the 24-hour customer service window is open. For more information, please visit [here](https://developers.facebook.com/docs/whatsapp/cloud-api/guides/send-messages#customer-service-windows).

<h4 id="send-media-message-input">Input</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Task ID (required) | `task` | string | `TASK_SEND_MEDIA_MESSAGE` |
| Phone Number ID (required) | `phone-number-id` | object ([def-input/phone-number-id](#send-media-message-def-input-phone-number-id)) | Phone Number ID. Obtainable through the app dashboard. Note: This is for sender. |
| Recipient Phone Number (required) | `to` | object ([def-input/to](#send-media-message-def-input-to)) | The number of the recipient you are sending the message to. |
| Media Type (required) | `media-type` | string<br/><small><small><details><summary>Enum values</summary><ul><li>`image`</li><li>`audio`</li><li>`document`</li><li>`video`</li></ul></details></small></small> | Specify what media to send. |
| ID or Link (required) | `id-or-link` | object ([def-input/media/id-or-link](#send-media-message-def-input-media-id-or-link)) | Input either ID or link of the media. If the input has `http`, it will be considered as a link. |
| Caption | `caption` | object ([def-input/media/caption](#send-media-message-def-input-media-caption)) | Media asset caption. Description of the media. This property cannot be used when the media type is audio. If audio tried to use this property, it will be ignored. |
| Filename | `filename` | object ([def-input/media/filename](#send-media-message-def-input-media-filename)) | The filename of the document. Only document can use this property. This property will specify what format the document is displayed as in WhatsApp. If other media type tried to use this property, it will be ignored. |
</div>

<h4 id="send-media-message-output">Output</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Recipient WhatsApp ID | `recipient-wa-id` | object ([def-output/recipient-wa-id](#send-media-message-def-output-recipient-wa-id)) | The WhatsApp ID of the recipient. Most likely the same with their phone number. |
| Message ID | `message-id` | object ([def-output/message-id](#send-media-message-def-output-message-id)) | The ID of the message. |
</div>


### Send Location Message

Send location message. Note: Message can only be sent when the 24-hour customer service window is open. For more information, please visit [here](https://developers.facebook.com/docs/whatsapp/cloud-api/guides/send-messages#customer-service-windows)

<h4 id="send-location-message-input">Input</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Task ID (required) | `task` | string | `TASK_SEND_LOCATION_MESSAGE` |
| Phone Number ID (required) | `phone-number-id` | object ([def-input/phone-number-id](#send-location-message-def-input-phone-number-id)) | Phone Number ID. Obtainable through the app dashboard. Note: This is for sender. |
| Recipient Phone Number (required) | `to` | object ([def-input/to](#send-location-message-def-input-to)) | The number of the recipient you are sending the message to. |
| Latitude (required) | `latitude` | object ([def-input/location/latitude](#send-location-message-def-input-location-latitude)) | Location latitude. |
| Longitude (required) | `longitude` | object ([def-input/location/longitude](#send-location-message-def-input-location-longitude)) | Location longitude. |
| Location Name (required) | `location-name` | object ([def-input/location/location-name](#send-location-message-def-input-location-location-name)) | Name of the location. |
| Location Address (required) | `address` | object ([def-input/location/address](#send-location-message-def-input-location-address)) | Address of the location. |
</div>

<h4 id="send-location-message-output">Output</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Recipient WhatsApp ID | `recipient-wa-id` | object ([def-output/recipient-wa-id](#send-location-message-def-output-recipient-wa-id)) | The WhatsApp ID of the recipient. Most likely the same with their phone number. |
| Message ID | `message-id` | object ([def-output/message-id](#send-location-message-def-output-message-id)) | The ID of the message. |
</div>


### Send Contact Message

Send contact message. Note: Message can only be sent when the 24-hour customer service window is open. For more information, please visit [here](https://developers.facebook.com/docs/whatsapp/cloud-api/guides/send-messages#customer-service-windows).

<h4 id="send-contact-message-input">Input</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Task ID (required) | `task` | string | `TASK_SEND_CONTACT_MESSAGE` |
| Phone Number ID (required) | `phone-number-id` | object ([def-input/phone-number-id](#send-contact-message-def-input-phone-number-id)) | Phone Number ID. Obtainable through the app dashboard. Note: This is for sender. |
| Recipient Phone Number (required) | `to` | object ([def-input/to](#send-contact-message-def-input-to)) | The number of the recipient you are sending the message to. |
| First Name (required) | `first-name` | string | First name of the contact. |
| Middle Name | `middle-name` | string | Middle name of the contact. |
| Last Name | `last-name` | string | Last name of the contact. |
| Phone Number | `phone-number` | string | Phone number of the contact. |
| Phone Number Type | `phone-number-type` | string<br/><small><small><details><summary>Enum values</summary><ul><li>`none`</li><li>`CELL`</li><li>`MAIN`</li><li>`PHONE`</li><li>`HOME`</li><li>`WORK`</li></ul></details></small></small> | Phone number type of the contact. If there is no phone number, pick none. |
| Email | `email` | string | Email of the contact. |
| Email Type | `email-type` | string<br/><small><small><details><summary>Enum values</summary><ul><li>`none`</li><li>`HOME`</li><li>`WORK`</li></ul></details></small></small> | Email type of the contact. If there is no email, pick none. |
| Birthday | `birthday` | string | Birthday of the contact. Format is in `YYYY-MM-DD`. |
</div>

<h4 id="send-contact-message-output">Output</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Recipient WhatsApp ID | `recipient-wa-id` | object ([def-output/recipient-wa-id](#send-contact-message-def-output-recipient-wa-id)) | The WhatsApp ID of the recipient. Most likely the same with their phone number. |
| Message ID | `message-id` | object ([def-output/message-id](#send-contact-message-def-output-message-id)) | The ID of the message. |
</div>


### Send Interactive Call to Action URL Button Message

Send interactive Call-To-Action URL button message. Note: Message can only be sent when the 24-hour customer service window is open. For more information, please visit [here](https://developers.facebook.com/docs/whatsapp/cloud-api/guides/send-messages#customer-service-windows).

<h4 id="send-interactive-call-to-action-url-button-message-input">Input</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Task ID (required) | `task` | string | `TASK_SEND_INTERACTIVE_CALL_TO_ACTION_URL_BUTTON_MESSAGE` |
| Phone Number ID (required) | `phone-number-id` | object ([def-input/phone-number-id](#send-interactive-call-to-action-url-button-message-def-input-phone-number-id)) | Phone Number ID. Obtainable through the app dashboard. Note: This is for sender. |
| Recipient Phone Number (required) | `to` | object ([def-input/to](#send-interactive-call-to-action-url-button-message-def-input-to)) | The number of the recipient you are sending the message to. |
| Header Text | `header-text` | string | Message header text. |
| Body Text (required) | `body-text` | string | Message body text. |
| Footer Text | `footer-text` | string | Message footer text. |
| Button Display Text (required) | `button-display-text` | string | The text displayed on the button. |
| Button URL (required) | `button-url` | string | URL to load when the user tapped the button. |
</div>

<h4 id="send-interactive-call-to-action-url-button-message-output">Output</h4>
<div class="markdown-col-no-wrap" data-col-1 data-col-2>

| Field | Field ID | Type | Description |
| :--- | :--- | :--- | :--- |
| Recipient WhatsApp ID | `recipient-wa-id` | object ([def-output/recipient-wa-id](#send-interactive-call-to-action-url-button-message-def-output-recipient-wa-id)) | The WhatsApp ID of the recipient. Most likely the same with their phone number. |
| Message ID | `message-id` | object ([def-output/message-id](#send-interactive-call-to-action-url-button-message-def-output-message-id)) | The ID of the message. |
</div>



